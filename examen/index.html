<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Actividad 4. Ejercicios de Simplificaci√≥n de Circuitos</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        // Verificar que jsPDF se cargue correctamente
        window.addEventListener('load', function() {
            if (typeof window.jspdf === 'undefined') {
                console.error('jsPDF no se pudo cargar');
            } else {
                console.log('jsPDF cargado correctamente');
            }
        });
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
        }

        .course-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
            font-size: 0.9em;
        }

        .info-card {
            background: rgba(255, 255, 255, 0.15);
            padding: 10px;
            border-radius: 8px;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: #e9ecef;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #495057;
            border-right: 1px solid #dee2e6;
        }

        .tab:last-child {
            border-right: none;
        }

        .tab.active {
            background: white;
            color: #1e3c72;
            border-bottom: 3px solid #1e3c72;
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .student-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            background: #f8f9fa;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #1e3c72;
            background: white;
        }

        input[readonly] {
            background: #e9ecef;
            color: #6c757d;
        }

        .btn {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(30, 60, 114, 0.4);
        }

        .btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-success {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }

        .exercise-block {
            background: white;
            border: 3px solid #1e3c72;
            border-radius: 10px;
            margin: 20px 0;
            padding: 25px;
        }

        .exercise-header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 20px;
            margin: -25px -25px 25px -25px;
            border-radius: 7px 7px 0 0;
        }

        .exercise-part {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 5px solid #1e3c72;
        }

        .circuit-diagram {
            text-align: center;
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            margin: 15px 0;
        }

        .step-guide {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .step-guide h4 {
            color: #1976d2;
            margin-bottom: 10px;
        }

        .step-guide ol {
            margin-left: 20px;
        }

        .attempts-counter {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 8px 12px;
            margin: 10px 0;
            font-weight: bold;
        }

        .feedback {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
        }

        .feedback.correct {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }

        .feedback.incorrect {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }

        .feedback.neutral {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #6c757d;
            font-size: 1.1em;
        }

        .karnaugh-map, .truth-table {
            margin: 20px auto;
            border-collapse: collapse;
            background: white;
        }

        .karnaugh-map th, .karnaugh-map td,
        .truth-table th, .truth-table td {
            border: 2px solid #1e3c72;
            width: 50px;
            height: 50px;
            text-align: center;
            vertical-align: middle;
            font-weight: bold;
            padding: 10px;
        }

        .karnaugh-map th, .truth-table th {
            background: #1e3c72;
            color: white;
        }

        .karnaugh-map input, .truth-table input {
            width: 35px;
            height: 30px;
            text-align: center;
            border: 1px solid #ccc;
            border-radius: 3px;
            font-size: 16px;
            font-weight: bold;
        }

        .status-display {
            margin: 15px 0;
            padding: 10px;
            border-radius: 8px;
            font-weight: bold;
            text-align: center;
        }

        .version-display {
            background: #d1ecf1;
            color: #0c5460;
            border: 2px solid #bee5eb;
        }

        .attempt-display {
            background: #fff3cd;
            color: #856404;
            border: 2px solid #ffeaa7;
        }

        .timer-display {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
            font-size: 1.2em;
        }

        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }
            
            .student-info {
                grid-template-columns: 1fr;
            }
        }

        /* Animaciones */
        .fadeIn {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .bounce {
            animation: bounce 0.6s ease-in-out;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîß Examen Completo: Sistemas Digitales</h1>
            <div class="course-info">
                <div class="info-card"><strong>Universidad:</strong> Universidad del Sabes</div>
                <div class="info-card"><strong>Campus:</strong> San Felipe</div>
                <div class="info-card"><strong>Asignatura:</strong> Sistemas Digitales</div>
                <div class="info-card"><strong>Profesor:</strong> Fausto No√© Jim√©nez</div>
                <div class="info-card"><strong>Cuatrimestre:</strong> Enero-Abril 2025</div>
                <div class="info-card"><strong>Tiempo:</strong> 30 minutos</div>
                <div class="info-card"><strong>Valor:</strong> 10 puntos</div>
                <div class="info-card"><strong>Actividad:</strong> ACT_03</div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('student')">üë§ Estudiante</button>
            <button class="tab" onclick="switchTab('ex1')">üìù Ejercicio 1</button>
            <button class="tab" onclick="switchTab('ex2')">‚ö° Ejercicio 2</button>
            <button class="tab" onclick="switchTab('ex3')">üí° Ejercicio 3</button>
            <button class="tab" onclick="switchTab('ex4')">üó∫Ô∏è Ejercicio 4</button>
            <button class="tab" onclick="switchTab('results')">üìä Resultados</button>
        </div>

        <!-- Datos del Estudiante -->
        <div class="tab-content active" id="student">
            <h2 style="margin-bottom: 20px; color: #1e3c72;">Informaci√≥n del Estudiante</h2>
            
            <div class="student-info">
                <div class="form-group">
                    <label>Seleccionar Matr√≠cula:</label>
                    <select id="studentSelect" onchange="updateStudentInfo()">
                        <option value="">-- Selecciona tu matr√≠cula --</option>
                        <optgroup label="Ingenier√≠a en Tecnolog√≠as de Informaci√≥n">
                            <option value="U2303057N0071">U2303057N0071 - GONZALEZ LARA MARTHA ESMERALDA</option>
                            <option value="U2303057N0141">U2303057N0141 - JARAMILLO ROMERO IVAN</option>
                            <option value="U2303057N0111">U2303057N0111 - JUAREZ JACINTO MARIO ADAN</option>
                            <option value="U2303057N0105">U2303057N0105 - MERINO ZAPIAIN ANA MAGDALA</option>
                            <option value="U2303057N0068">U2303057N0068 - PEREZ TAVERA GUADALUPE BERENICE</option>
                            <option value="U2303057N0116">U2303057N0116 - RANGEL AGUAYO ANGEL</option>
                        </optgroup>
                        <optgroup label="Ingenier√≠a Industrial">
                            <option value="U2303057N0155">U2303057N0155 - DE HARO SEGURA DENIEL</option>
                            <option value="U2303057N0020">U2303057N0020 - GARCIA ROMERO CENOBIO</option>
                            <option value="U2303057N0049">U2303057N0049 - GUTIERREZ GUTIERREZ DANNA LIZBETH</option>
                            <option value="U2303057N0080">U2303057N0080 - HERNANDEZ VILLEGAS FATIMA</option>
                            <option value="U2303057N0070">U2303057N0070 - LUCIO RODRIGUEZ EYMI JOSELIN</option>
                            <option value="U2303057N0012">U2303057N0012 - MACHUCA HERNANDEZ JUAN SOLEDAD</option>
                            <option value="U2303057N0021">U2303057N0021 - MEDELLIN MARQUEZ MAYRA JAZMIN</option>
                            <option value="U2303057N0046">U2303057N0046 - MEJIA BANDA LUIS ERNESTO</option>
                            <option value="U2303057N0086">U2303057N0086 - MEJIA CANO PERLA DEL CARMEN</option>
                            <option value="U2303057N0064">U2303057N0064 - MENDOZA FLORES SANDY</option>
                            <option value="U2303057N0108">U2303057N0108 - MORUA ZU√ëIGA PATRICIA BIRIDIANA</option>
                            <option value="U2203057N0070">U2203057N0070 - ORTIZ CHAVEZ JOSE MANUEL</option>
                            <option value="U2303057N0001">U2303057N0001 - ORTIZ ORTIZ LUIS ALEJANDRO</option>
                            <option value="U2303057N0110">U2303057N0110 - PEREZ RANGEL JORGE ARMANDO</option>
                            <option value="U2303057N0039">U2303057N0039 - ROCHA SALGADO JHONATAN ISAAC</option>
                            <option value="U2303057N0066">U2303057N0066 - RODRIGUEZ GARCIA DAISA GUADALUPE</option>
                            <option value="U2303057N0092">U2303057N0092 - RODRIGUEZ GARCIA MANUEL EDUARDO</option>
                            <option value="U2303057N0014">U2303057N0014 - RODRIGUEZ PADILLA JORGE ALBERTO</option>
                            <option value="U2303057N0041">U2303057N0041 - ROSALES MARQUEZ EDGAR</option>
                            <option value="U2303057N0077">U2303057N0077 - VEGA CORREA ROSA ISELA</option>
                            <option value="U2303057N0152">U2303057N0152 - YA√ëEZ BERNAL GEMMA</option>
                        </optgroup>
                    </select>
                </div>

                <div class="form-group">
                    <label>Nombre Completo:</label>
                    <input type="text" id="studentName" readonly>
                </div>

                <div class="form-group">
                    <label>Carrera:</label>
                    <input type="text" id="studentCareer" readonly>
                </div>

                <div class="form-group">
                    <label>Grupo:</label>
                    <input type="text" id="studentGroup" value="5A" readonly>
                </div>
            </div>

            <!-- Displays de estado -->
            <div class="status-display version-display" id="versionDisplay">
                Versi√≥n asignada: -
            </div>

            <div class="status-display attempt-display" id="attemptDisplay">
                Intento: -
            </div>

            <div class="status-display timer-display" id="timerDisplay" style="display: none;">
                Tiempo: 00:00
            </div>

            <div style="text-align: center;">
                <button class="btn btn-success" id="startBtn" onclick="startExam()" disabled>
                    üöÄ Comenzar Examen
                </button>
            </div>
        </div>

        <!-- Ejercicio 1: Dibujar y Simplificar -->
        <div class="tab-content" id="ex1">
            <div class="exercise-block">
                <div class="exercise-header">
                    <h3 style="margin: 0; font-size: 1.5em;">üìù Ejercicio 1: Dibujar Circuitos y Simplificar (2.5 puntos)</h3>
                    <p style="margin: 5px 0 0 0;">Dibuje el circuito l√≥gico y simplifique las expresiones</p>
                </div>

                <div class="step-guide">
                    <h4>üìã Instrucciones:</h4>
                    <ul>
                        <li>Use notaci√≥n est√°ndar: AND (¬∑), OR (+), NOT (')</li>
                        <li><strong>Ejemplo:</strong> A¬∑B' + C o simplemente AB' + C</li>
                        <li>Tiene <strong>5 intentos</strong> por pregunta</li>
                    </ul>
                </div>

                <div class="exercise-part">
                    <h4 style="color: #1e3c72;">a) AÃÖBÃÖ + AÃÖB (0.5 puntos)</h4>
                    <p><strong>Descripci√≥n del circuito:</strong></p>
                    
                    <div style="margin: 15px 0;">
                        <input type="radio" id="circuit1a_A" name="circuit1a" value="A" onchange="selectCircuitOption('1a', 'A')">
                        <label for="circuit1a_A" style="margin-left: 10px; font-weight: normal;">
                            A) Las entradas A y B ‚Üí compuertas NOT ‚Üí van a una sola compuerta AND ‚Üí salida
                        </label>
                    </div>

                    <div style="margin: 15px 0;">
                        <input type="radio" id="circuit1a_B" name="circuit1a" value="B" onchange="selectCircuitOption('1a', 'B')">
                        <label for="circuit1a_B" style="margin-left: 10px; font-weight: normal;">
                            B) A y B ‚Üí compuertas NOT ‚Üí AÃÖ y BÃÖ van a AND, tambi√©n AÃÖ y B van a otra AND ‚Üí ambas salidas a OR
                        </label>
                    </div>

                    <div style="margin: 15px 0;">
                        <input type="radio" id="circuit1a_C" name="circuit1a" value="C" onchange="selectCircuitOption('1a', 'C')">
                        <label for="circuit1a_C" style="margin-left: 10px; font-weight: normal;">
                            C) A y B van directamente a compuertas AND, luego la salida pasa por NOT
                        </label>
                    </div>

                    <p><strong>Expresi√≥n simplificada:</strong></p>
                    <input type="text" id="ex1a_simplified" placeholder="Resultado de la simplificaci√≥n">
                    <button class="btn" onclick="checkAnswer('1a')">Validar</button>
                    <div class="attempts-counter">Intentos restantes: <span id="attempts1a">5</span></div>
                    <div id="feedback1a"></div>
                </div>

                <div class="exercise-part">
                    <h4 style="color: #1e3c72;">b) AB + AÃÖB + AÃÖBC (0.5 puntos)</h4>
                    <p><strong>Descripci√≥n del circuito:</strong></p>
                    
                    <div style="margin: 15px 0;">
                        <input type="radio" id="circuit1b_A" name="circuit1b" value="A" onchange="selectCircuitOption('1b', 'A')">
                        <label for="circuit1b_A" style="margin-left: 10px; font-weight: normal;">
                            A) A y B ‚Üí AND, A pasa por NOT ‚Üí AÃÖ y B ‚Üí AND, AÃÖ y B y C ‚Üí AND de 3 entradas ‚Üí todas a OR
                        </label>
                    </div>

                    <div style="margin: 15px 0;">
                        <input type="radio" id="circuit1b_B" name="circuit1b" value="B" onchange="selectCircuitOption('1b', 'B')">
                        <label for="circuit1b_B" style="margin-left: 10px; font-weight: normal;">
                            B) A, B y C van directamente a una compuerta OR de 3 entradas
                        </label>
                    </div>

                    <div style="margin: 15px 0;">
                        <input type="radio" id="circuit1b_C" name="circuit1b" value="C" onchange="selectCircuitOption('1b', 'C')">
                        <label for="circuit1b_C" style="margin-left: 10px; font-weight: normal;">
                            C) Todas las variables pasan por NOT, luego van a compuertas AND
                        </label>
                    </div>

                    <p><strong>Expresi√≥n simplificada:</strong></p>
                    <input type="text" id="ex1b_simplified" placeholder="Resultado de la simplificaci√≥n">
                    <button class="btn" onclick="checkAnswer('1b')">Validar</button>
                    <div class="attempts-counter">Intentos restantes: <span id="attempts1b">5</span></div>
                    <div id="feedback1b"></div>
                </div>
            </div>
        </div>

        <!-- Ejercicio 2: Simplificaci√≥n de Circuito -->
        <div class="tab-content" id="ex2">
            <div class="exercise-block">
                <div class="exercise-header">
                    <h3 style="margin: 0; font-size: 1.5em;">‚ö° Ejercicio 2: Simplificar Circuito L√≥gico (2.5 puntos)</h3>
                    <p style="margin: 5px 0 0 0;">Analice el circuito mostrado y simplif√≠quelo</p>
                </div>

                <div class="circuit-diagram">
                    <h4>Circuito a Simplificar:</h4>
                    <svg width="700" height="400" viewBox="0 0 700 400" style="background: white; border: 2px solid #e9ecef; border-radius: 8px;">
                        <!-- Entradas -->
                        <text x="30" y="80" fill="#1e3c72" font-size="18" font-weight="bold">A</text>
                        <text x="30" y="200" fill="#1e3c72" font-size="18" font-weight="bold">B</text>
                        <text x="30" y="320" fill="#1e3c72" font-size="18" font-weight="bold">C</text>
                        
                        <!-- L√≠neas principales -->
                        <line x1="50" y1="75" x2="120" y2="75" stroke="#2c3e50" stroke-width="3"/>
                        <line x1="50" y1="195" x2="120" y2="195" stroke="#2c3e50" stroke-width="3"/>
                        <line x1="50" y1="315" x2="120" y2="315" stroke="#2c3e50" stroke-width="3"/>
                        
                        <!-- Compuerta NOT para A -->
                        <g transform="translate(120, 60)">
                            <polygon points="0,0 0,30 25,15" fill="#ffcc80" stroke="#d84315" stroke-width="2"/>
                            <circle cx="30" cy="15" r="5" fill="white" stroke="#d84315" stroke-width="2"/>
                            <line x1="35" y1="15" x2="55" y2="15" stroke="#2c3e50" stroke-width="3"/>
                        </g>
                        
                        <!-- Compuerta NOT para C -->
                        <g transform="translate(120, 300)">
                            <polygon points="0,0 0,30 25,15" fill="#ffcc80" stroke="#d84315" stroke-width="2"/>
                            <circle cx="30" cy="15" r="5" fill="white" stroke="#d84315" stroke-width="2"/>
                            <line x1="35" y1="15" x2="55" y2="15" stroke="#2c3e50" stroke-width="3"/>
                        </g>
                        
                        <!-- Conexiones -->
                        <line x1="175" y1="75" x2="220" y2="75" stroke="#2c3e50" stroke-width="2"/>
                        <line x1="220" y1="75" x2="220" y2="100" stroke="#2c3e50" stroke-width="2"/>
                        <line x1="220" y1="100" x2="250" y2="100" stroke="#2c3e50" stroke-width="2"/>
                        
                        <line x1="120" y1="195" x2="200" y2="195" stroke="#2c3e50" stroke-width="2"/>
                        <circle cx="200" cy="195" r="3" fill="#2c3e50"/>
                        <line x1="200" y1="195" x2="200" y2="140" stroke="#2c3e50" stroke-width="2"/>
                        <line x1="200" y1="140" x2="250" y2="140" stroke="#2c3e50" stroke-width="2"/>
                        <line x1="200" y1="195" x2="200" y2="250" stroke="#2c3e50" stroke-width="2"/>
                        <line x1="200" y1="250" x2="250" y2="250" stroke="#2c3e50" stroke-width="2"/>
                        
                        <line x1="175" y1="315" x2="230" y2="315" stroke="#2c3e50" stroke-width="2"/>
                        <line x1="230" y1="315" x2="230" y2="270" stroke="#2c3e50" stroke-width="2"/>
                        <line x1="230" y1="270" x2="250" y2="270" stroke="#2c3e50" stroke-width="2"/>
                        
                        <!-- Compuertas AND -->
                        <g transform="translate(250, 90)">
                            <rect x="0" y="0" width="50" height="60" fill="#ffab91" stroke="#e65100" stroke-width="2"/>
                            <path d="M 50 0 Q 80 30 50 60" fill="#ffab91" stroke="#e65100" stroke-width="2"/>
                            <text x="25" y="38" text-anchor="middle" font-size="16" font-weight="bold" fill="#bf360c">&amp;</text>
                            <line x1="80" y1="30" x2="100" y2="30" stroke="#2c3e50" stroke-width="3"/>
                        </g>
                        
                        <g transform="translate(250, 230)">
                            <rect x="0" y="0" width="50" height="60" fill="#ffab91" stroke="#e65100" stroke-width="2"/>
                            <path d="M 50 0 Q 80 30 50 60" fill="#ffab91" stroke="#e65100" stroke-width="2"/>
                            <text x="25" y="38" text-anchor="middle" font-size="16" font-weight="bold" fill="#bf360c">&amp;</text>
                            <line x1="80" y1="30" x2="100" y2="30" stroke="#2c3e50" stroke-width="3"/>
                        </g>
                        
                        <!-- Conexiones a OR -->
                        <line x1="350" y1="120" x2="420" y2="120" stroke="#2c3e50" stroke-width="3"/>
                        <line x1="350" y1="260" x2="420" y2="260" stroke="#2c3e50" stroke-width="3"/>
                        <line x1="420" y1="120" x2="420" y2="170" stroke="#2c3e50" stroke-width="2"/>
                        <line x1="420" y1="260" x2="420" y2="210" stroke="#2c3e50" stroke-width="2"/>
                        
                        <!-- Compuerta OR -->
                        <g transform="translate(430, 160)">
                            <path d="M 0 0 Q 20 0 40 30 Q 20 60 0 60 Q 15 30 0 0" fill="#ffcdd2" stroke="#c62828" stroke-width="2"/>
                            <text x="20" y="35" text-anchor="middle" font-size="14" font-weight="bold" fill="white">‚â•1</text>
                            <line x1="40" y1="30" x2="80" y2="30" stroke="#2c3e50" stroke-width="4"/>
                        </g>
                        
                        <text x="530" y="200" fill="#1e3c72" font-size="18" font-weight="bold">Salida</text>
                    </svg>
                </div>

                <div class="exercise-part">
                    <h4 style="color: #1e3c72;">a) Indique la expresi√≥n del circuito original (1 punto)</h4>
                    <input type="text" id="ex2a_expression" placeholder="Ejemplo: A'B + BC' (NOT A AND B OR B AND NOT C)">
                    <button class="btn" onclick="checkAnswer('2a')">Validar</button>
                    <div class="attempts-counter">Intentos restantes: <span id="attempts2a">5</span></div>
                    <div id="feedback2a"></div>
                </div>

                <div class="exercise-part">
                    <h4 style="color: #1e3c72;">b) Expresi√≥n simplificada (1.5 puntos)</h4>
                    <input type="text" id="ex2b_simplified" placeholder="Ejemplo: A' o B'C + D (use apostrofe para NOT)">
                    <button class="btn" onclick="checkAnswer('2b')">Validar</button>
                    <div class="attempts-counter">Intentos restantes: <span id="attempts2b">5</span></div>
                    <div id="feedback2b"></div>
                </div>
            </div>
        </div>

        <!-- Ejercicio 3: Circuito de Mayor√≠a -->
        <div class="tab-content" id="ex3">
            <div class="exercise-block">
                <div class="exercise-header">
                    <h3 style="margin: 0; font-size: 1.5em;">üí° Ejercicio 3: Circuito de Mayor√≠a (2.5 puntos)</h3>
                    <p style="margin: 5px 0 0 0;">Dise√±e un circuito que tenga salida ALTO cuando la mayor√≠a de entradas est√© en ALTO</p>
                </div>

                <div class="step-guide">
                    <h4>üìö ¬øQu√© es un Circuito de Mayor√≠a?</h4>
                    <p>Un <strong>circuito de mayor√≠a</strong> es un circuito l√≥gico que produce una salida <strong>ALTO (1)</strong> cuando la <em>mayor√≠a</em> de sus entradas est√°n en estado <strong>ALTO</strong>.</p>
                    
                    <div style="background: #e8f5e8; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 5px solid #28a745;">
                        <h5 style="color: #1b5e20; margin-bottom: 10px;">üéØ Regla del Circuito de Mayor√≠a (3 entradas):</h5>
                        <ul style="color: #1b5e20; margin-left: 20px;">
                            <li><strong>Salida = 1</strong> cuando <strong>al menos 2 de las 3 entradas</strong> est√°n en <strong>1</strong></li>
                            <li><strong>Salida = 0</strong> cuando <strong>menos de 2 entradas</strong> est√°n en <strong>1</strong></li>
                        </ul>
                    </div>
                </div>

                <div class="exercise-part">
                    <h4 style="color: #1e3c72;">Tabla de Verdad - Circuito de Mayor√≠a (1 punto)</h4>
                    <p><strong>Instrucciones:</strong> Complete la tabla aplicando la regla de mayor√≠a. La salida es <strong>1</strong> cuando <em>al menos 2 de las 3 entradas</em> son <strong>1</strong>.</p>
                    
                    <table class="truth-table">
                        <thead>
                            <tr>
                                <th>A</th>
                                <th>B</th>
                                <th>C</th>
                                <th>Suma (A+B+C)</th>
                                <th>Salida Y</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>0</td><td>0</td><td>0</td>
                                <td style="background: #f8f9fa; font-weight: bold;">0</td>
                                <td>
                                    <select id="tt3_0" style="width: 50px; padding: 5px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>0</td><td>0</td><td>1</td>
                                <td style="background: #f8f9fa; font-weight: bold;">1</td>
                                <td>
                                    <select id="tt3_1" style="width: 50px; padding: 5px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>0</td><td>1</td><td>0</td>
                                <td style="background: #f8f9fa; font-weight: bold;">1</td>
                                <td>
                                    <select id="tt3_2" style="width: 50px; padding: 5px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>0</td><td>1</td><td>1</td>
                                <td style="background: #e8f5e8; font-weight: bold; color: #1b5e20;">2 ‚úì</td>
                                <td>
                                    <select id="tt3_3" style="width: 50px; padding: 5px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>1</td><td>0</td><td>0</td>
                                <td style="background: #f8f9fa; font-weight: bold;">1</td>
                                <td>
                                    <select id="tt3_4" style="width: 50px; padding: 5px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>1</td><td>0</td><td>1</td>
                                <td style="background: #e8f5e8; font-weight: bold; color: #1b5e20;">2 ‚úì</td>
                                <td>
                                    <select id="tt3_5" style="width: 50px; padding: 5px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>1</td><td>1</td><td>0</td>
                                <td style="background: #e8f5e8; font-weight: bold; color: #1b5e20;">2 ‚úì</td>
                                <td>
                                    <select id="tt3_6" style="width: 50px; padding: 5px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>1</td><td>1</td><td>1</td>
                                <td style="background: #e8f5e8; font-weight: bold; color: #1b5e20;">3 ‚úì</td>
                                <td>
                                    <select id="tt3_7" style="width: 50px; padding: 5px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <button class="btn" onclick="checkAnswer('3table')">Validar Tabla</button>
                    <div id="feedback3table"></div>
                </div>

                <div class="exercise-part">
                    <h4 style="color: #1e3c72;">Expresi√≥n simplificada (1.5 puntos)</h4>
                    <div style="background: #e8f5e8; padding: 20px; border-radius: 8px; margin: 15px 0; border-left: 5px solid #28a745;">
                        <h5 style="color: #1b5e20; margin-bottom: 15px;">üìö C√≥mo Crear la Expresi√≥n Simplificada:</h5>
                        <p style="color: #1b5e20;">Para el circuito de mayor√≠a, identifique los mint√©rminos donde la salida = 1 y simplifique usando √°lgebra booleana.</p>
                    </div>
                    
                    <input type="text" id="ex3_simplified" placeholder="Escriba la expresi√≥n booleana simplificada aqu√≠">
                    <button class="btn" onclick="checkAnswer('3simplified')">Validar</button>
                    <div class="attempts-counter">Intentos restantes: <span id="attempts3simplified">5</span></div>
                    <div id="feedback3simplified"></div>
                </div>
            </div>
        </div>

        <!-- Ejercicio 4: Mapas de Karnaugh -->
        <div class="tab-content" id="ex4">
            <div class="exercise-block">
                <div class="exercise-header">
                    <h3 style="margin: 0; font-size: 1.5em;">üó∫Ô∏è Ejercicio 4: Mapas de Karnaugh (2.5 puntos)</h3>
                    <p style="margin: 5px 0 0 0;">Utilice los mapas de Karnaugh para simplificar la expresi√≥n</p>
                </div>

                <div class="exercise-part">
                    <h4 style="color: #1e3c72;">Expresi√≥n a simplificar:</h4>
                    <div style="text-align: center; font-size: 1.2em; font-weight: bold; margin: 20px 0; padding: 15px; background: #fff3cd; border-radius: 8px;">
                        Y = CÃÖ(ABÃÖDÃÖ + D) + AÃÖBC + DÃÖ
                    </div>
                </div>

                <div class="exercise-part">
                    <h4 style="color: #1e3c72;">Paso 1: Tabla de Verdad (1 punto)</h4>
                    <p>Complete la tabla de verdad para la expresi√≥n dada:</p>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; align-items: start;">
                        <table class="truth-table" style="font-size: 12px;">
                            <thead>
                                <tr>
                                    <th>A</th><th>B</th><th>C</th><th>D</th><th>Y</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>0</td><td>0</td><td>0</td><td>0</td><td>
                                    <select id="tt4_0" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td></tr>
                                <tr><td>0</td><td>0</td><td>0</td><td>1</td><td>
                                    <select id="tt4_1" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td></tr>
                                <tr><td>0</td><td>0</td><td>1</td><td>0</td><td>
                                    <select id="tt4_2" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td></tr>
                                <tr><td>0</td><td>0</td><td>1</td><td>1</td><td>
                                    <select id="tt4_3" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td></tr>
                                <tr><td>0</td><td>1</td><td>0</td><td>0</td><td>
                                    <select id="tt4_4" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td></tr>
                                <tr><td>0</td><td>1</td><td>0</td><td>1</td><td>
                                    <select id="tt4_5" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td></tr>
                                <tr><td>0</td><td>1</td><td>1</td><td>0</td><td>
                                    <select id="tt4_6" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td></tr>
                                <tr><td>0</td><td>1</td><td>1</td><td>1</td><td>
                                    <select id="tt4_7" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td></tr>
                            </tbody>
                        </table>
                        
                        <table class="truth-table" style="font-size: 12px;">
                            <thead>
                                <tr>
                                    <th>A</th><th>B</th><th>C</th><th>D</th><th>Y</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>1</td><td>0</td><td>0</td><td>0</td><td>
                                    <select id="tt4_8" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td></tr>
                                <tr><td>1</td><td>0</td><td>0</td><td>1</td><td>
                                    <select id="tt4_9" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td></tr>
                                <tr><td>1</td><td>0</td><td>1</td><td>0</td><td>
                                    <select id="tt4_10" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td></tr>
                                <tr><td>1</td><td>0</td><td>1</td><td>1</td><td>
                                    <select id="tt4_11" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td></tr>
                                <tr><td>1</td><td>1</td><td>0</td><td>0</td><td>
                                    <select id="tt4_12" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td></tr>
                                <tr><td>1</td><td>1</td><td>0</td><td>1</td><td>
                                    <select id="tt4_13" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td></tr>
                                <tr><td>1</td><td>1</td><td>1</td><td>0</td><td>
                                    <select id="tt4_14" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td></tr>
                                <tr><td>1</td><td>1</td><td>1</td><td>1</td><td>
                                    <select id="tt4_15" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td></tr>
                            </tbody>
                        </table>
                    </div>

                    <div style="margin: 15px 0;">
                        <button class="btn" onclick="checkAnswer('4table')">Validar Tabla de Verdad</button>
                        <div id="feedback4table"></div>
                    </div>
                </div>

                <div class="exercise-part">
                    <h4 style="color: #1e3c72;">Paso 2: Mapa de Karnaugh (1 punto)</h4>
                    <p>Transfiera los valores de la tabla de verdad al mapa K:</p>
                    
                    <table class="karnaugh-map">
                        <thead>
                            <tr>
                                <th>AB\CD</th><th>00</th><th>01</th><th>11</th><th>10</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="background: #1e3c72; color: white; font-weight: bold;">00</td>
                                <td>
                                    <select id="k_00" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td>
                                <td>
                                    <select id="k_01" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td>
                                <td>
                                    <select id="k_03" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td>
                                <td>
                                    <select id="k_02" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td style="background: #1e3c72; color: white; font-weight: bold;">01</td>
                                <td>
                                    <select id="k_04" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td>
                                <td>
                                    <select id="k_05" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td>
                                <td>
                                    <select id="k_07" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td>
                                <td>
                                    <select id="k_06" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td style="background: #1e3c72; color: white; font-weight: bold;">11</td>
                                <td>
                                    <select id="k_12" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td>
                                <td>
                                    <select id="k_13" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td>
                                <td>
                                    <select id="k_15" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td>
                                <td>
                                    <select id="k_14" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td style="background: #1e3c72; color: white; font-weight: bold;">10</td>
                                <td>
                                    <select id="k_08" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td>
                                <td>
                                    <select id="k_09" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td>
                                <td>
                                    <select id="k_11" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td>
                                <td>
                                    <select id="k_10" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
                                        <option value="">?</option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                    </select>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <button class="btn" onclick="checkAnswer('4karnaugh')">Validar Mapa K</button>
                    <div id="feedback4karnaugh"></div>
                </div>

                <div class="exercise-part">
                    <h4 style="color: #1e3c72;">Expresi√≥n Simplificada (0.5 puntos)</h4>
                    <input type="text" id="ex4_simplified" placeholder="Expresi√≥n simplificada usando agrupaciones del mapa K">
                    <button class="btn" onclick="checkAnswer('4simplified')">Validar</button>
                    <div class="attempts-counter">Intentos restantes: <span id="attempts4simplified">5</span></div>
                    <div id="feedback4simplified"></div>
                </div>
            </div>
        </div>

        <!-- Resultados -->
        <div class="tab-content" id="results">
            <div id="resultsArea">
                <div class="loading">Los resultados aparecer√°n aqu√≠ al completar el examen</div>
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn btn-success" onclick="finishExam()">üìù Generar Calificaci√≥n Final</button>
            </div>
        </div>
    </div>

    <script>
        // Variables globales del examen
        let currentVersion = -1;
        let examStarted = false;
        let examStartTime = null;
        let examEndTime = null;
        let timer;
        let studentData = {};
        let studentAnswers = {};
        let studentScores = { ex1: 0, ex2: 0, ex3: 0, ex4: 0, total: 0 };
        let attempts = {
            '1a': 5, '1b': 5, '2a': 5, '2b': 5, 
            '3simplified': 5, '4simplified': 5
        };

        // Respuestas correctas para cada ejercicio
        const correctAnswers = {
            '1a': {
                circuit: 'B',
                simplified: ['A\'', "A'"]
            },
            '1b': {
                circuit: 'A',
                simplified: ['B', 'b']
            },
            '2a': {
                expression: ['A\'B + BC\'', "A'B + BC'", 'A\'B+BC\'', "A'B+BC'"]
            },
            '2b': {
                simplified: ['B', 'b']
            },
            '3table': ['0', '0', '0', '1', '0', '1', '1', '1'],
            '3simplified': ['AB + AC + BC', 'AB+AC+BC', 'BC+AB+AC', 'AC+AB+BC', 'BC+AC+AB', 'AB+BC+AC'],
            '4table': ['1', '1', '1', '0', '1', '1', '1', '0', '1', '1', '1', '0', '1', '1', '1', '0'],
            '4karnaugh': ['1', '1', '0', '1', '1', '1', '0', '1', '1', '1', '0', '1', '1', '1', '0', '1'],
            '4simplified': ['C\' + A\'B', "C' + A'B", 'C\'+A\'B', "C'+A'B"]
        };

        // Funci√≥n para actualizar informaci√≥n del estudiante
        function updateStudentInfo() {
            const selectElement = document.getElementById('studentSelect');
            const selectedValue = selectElement.value;
            
            if (selectedValue === '') {
                // Limpiar campos si no hay selecci√≥n
                document.getElementById('studentName').value = '';
                document.getElementById('studentCareer').value = '';
                document.getElementById('startBtn').disabled = true;
                return;
            }

            // Obtener el texto completo del option seleccionado
            const selectedOption = selectElement.options[selectElement.selectedIndex];
            const fullText = selectedOption.text;
            
            // Extraer matr√≠cula y nombre del texto completo
            const parts = fullText.split(' - ');
            const matricula = parts[0];
            const fullName = parts.slice(1).join(' - ');
            
            // Determinar carrera basada en el optgroup
            let career = '';
            const optgroup = selectedOption.parentNode;
            
            if (optgroup.label === 'Ingenier√≠a en Tecnolog√≠as de Informaci√≥n') {
                career = 'Ingenier√≠a en Tecnolog√≠as de Informaci√≥n';
            } else if (optgroup.label === 'Ingenier√≠a Industrial') {
                career = 'Ingenier√≠a Industrial';
            }

            // Actualizar campos en la interfaz
            document.getElementById('studentName').value = fullName;
            document.getElementById('studentCareer').value = career;
            
            // Guardar datos del estudiante
            studentData = {
                matricula: matricula,
                name: fullName,
                career: career,
                group: '5A'
            };

            // Habilitar bot√≥n de inicio
            document.getElementById('startBtn').disabled = false;
            
            // Log para debug
            console.log('Datos del estudiante cargados:', studentData);
        }

        // Funci√≥n para cambiar pesta√±as
        function switchTab(tabId) {
            // Ocultar todas las pesta√±as
            const allTabs = document.querySelectorAll('.tab-content');
            const allTabButtons = document.querySelectorAll('.tab');
            
            allTabs.forEach(tab => tab.classList.remove('active'));
            allTabButtons.forEach(button => button.classList.remove('active'));
            
            // Mostrar pesta√±a seleccionada
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }

        // Funci√≥n para seleccionar opci√≥n de circuito
        function selectCircuitOption(exercise, option) {
            console.log(`Ejercicio ${exercise}, opci√≥n seleccionada: ${option}`);
        }

        // Funci√≥n para verificar respuestas
        function checkAnswer(exerciseId) {
            let isCorrect = false;
            let userAnswer = '';
            let feedbackElement = document.getElementById(`feedback${exerciseId}`);
            
            if (!feedbackElement) {
                feedbackElement = document.getElementById(`feedback${exerciseId.replace(/\d/, '')}`);
            }

            switch(exerciseId) {
                case '1a':
                    const circuit1a = document.querySelector('input[name="circuit1a"]:checked');
                    const simplified1a = document.getElementById('ex1a_simplified').value.trim();
                    
                    if (circuit1a && circuit1a.value === correctAnswers['1a'].circuit && 
                        correctAnswers['1a'].simplified.includes(simplified1a)) {
                        isCorrect = true;
                        userAnswer = `Circuito: ${circuit1a.value}, Simplificado: ${simplified1a}`;
                    }
                    break;

                case '1b':
                    const circuit1b = document.querySelector('input[name="circuit1b"]:checked');
                    const simplified1b = document.getElementById('ex1b_simplified').value.trim();
                    
                    if (circuit1b && circuit1b.value === correctAnswers['1b'].circuit && 
                        correctAnswers['1b'].simplified.includes(simplified1b)) {
                        isCorrect = true;
                        userAnswer = `Circuito: ${circuit1b.value}, Simplificado: ${simplified1b}`;
                    }
                    break;

                case '2a':
                    userAnswer = document.getElementById('ex2a_expression').value.trim();
                    isCorrect = correctAnswers['2a'].expression.includes(userAnswer);
                    break;

                case '2b':
                    userAnswer = document.getElementById('ex2b_simplified').value.trim();
                    isCorrect = correctAnswers['2b'].simplified.includes(userAnswer);
                    break;

                case '3table':
                    const tableAnswers = [];
                    for (let i = 0; i < 8; i++) {
                        const value = document.getElementById(`tt3_${i}`).value;
                        tableAnswers.push(value);
                    }
                    isCorrect = JSON.stringify(tableAnswers) === JSON.stringify(correctAnswers['3table']);
                    userAnswer = tableAnswers.join(',');
                    break;

                case '3simplified':
                    userAnswer = document.getElementById('ex3_simplified').value.trim();
                    isCorrect = correctAnswers['3simplified'].some(answer => 
                        userAnswer.toLowerCase().replace(/\s/g, '') === answer.toLowerCase().replace(/\s/g, '')
                    );
                    break;

                case '4table':
                    const table4Answers = [];
                    for (let i = 0; i < 16; i++) {
                        const value = document.getElementById(`tt4_${i}`).value;
                        table4Answers.push(value);
                    }
                    isCorrect = JSON.stringify(table4Answers) === JSON.stringify(correctAnswers['4table']);
                    userAnswer = table4Answers.join(',');
                    break;

                case '4karnaugh':
                    const karnaughAnswers = [];
                    const kOrder = [0, 1, 3, 2, 4, 5, 7, 6, 12, 13, 15, 14, 8, 9, 11, 10];
                    for (let i = 0; i < 16; i++) {
                        const value = document.getElementById(`k_${i.toString().padStart(2, '0')}`).value;
                        karnaughAnswers.push(value);
                    }
                    // Reordenar seg√∫n el orden del mapa K
                    const orderedAnswers = kOrder.map(index => karnaughAnswers[index]);
                    isCorrect = JSON.stringify(orderedAnswers) === JSON.stringify(correctAnswers['4karnaugh']);
                    userAnswer = karnaughAnswers.join(',');
                    break;

                case '4simplified':
                    userAnswer = document.getElementById('ex4_simplified').value.trim();
                    isCorrect = correctAnswers['4simplified'].some(answer => 
                        userAnswer.toLowerCase().replace(/\s/g, '') === answer.toLowerCase().replace(/\s/g, '')
                    );
                    break;
            }

            // Actualizar intentos y mostrar feedback
            if (attempts[exerciseId] !== undefined) {
                if (!isCorrect) {
                    attempts[exerciseId]--;
                    document.getElementById(`attempts${exerciseId}`).textContent = attempts[exerciseId];
                }

                if (attempts[exerciseId] <= 0) {
                    feedbackElement.className = 'feedback incorrect';
                    feedbackElement.textContent = 'Sin intentos restantes. Respuesta incorrecta.';
                    return;
                }
            }

            // Mostrar feedback
            if (isCorrect) {
                feedbackElement.className = 'feedback correct';
                feedbackElement.textContent = '‚úÖ ¬°Correcto! Respuesta v√°lida.';
            } else {
                feedbackElement.className = 'feedback incorrect';
                feedbackElement.textContent = `‚ùå Incorrecto. Intenta de nuevo. Respuesta: "${userAnswer}"`;
            }
        }

        // Funci√≥n para iniciar el examen
        function startExam() {
            if (!studentData.matricula) {
                alert('Por favor selecciona tu matr√≠cula antes de comenzar');
                return;
            }

            examStarted = true;
            examStartTime = new Date();
            
            // Asignar versi√≥n aleatoria
            currentVersion = Math.floor(Math.random() * 10);
            document.getElementById('versionDisplay').innerText = `Versi√≥n asignada: ${currentVersion}`;
            
            // Incrementar contador de intentos
            let attemptCount = parseInt(localStorage.getItem('attempts') || '0') + 1;
            localStorage.setItem('attempts', attemptCount);
            document.getElementById('attemptDisplay').innerText = `Intento: ${attemptCount}`;
            
            // Iniciar cron√≥metro
            startTimer();
            
            // Cambiar a primera pesta√±a de ejercicio
            switchTab('ex1');
            
            alert(`¬°Examen iniciado! Versi√≥n ${currentVersion}\nTienes 30 minutos para completarlo.`);
        }

        // Funci√≥n del cron√≥metro
        function startTimer() {
            const startTime = Date.now();
            const duration = 30 * 60 * 1000; // 30 minutos en milisegundos
            
            document.getElementById('timerDisplay').style.display = 'block';
            
            timer = setInterval(function() {
                const elapsed = Date.now() - startTime;
                const remaining = duration - elapsed;
                
                if (remaining <= 0) {
                    clearInterval(timer);
                    document.getElementById('timerDisplay').innerText = 'TIEMPO TERMINADO';
                    document.getElementById('timerDisplay').style.background = '#dc3545';
                    alert('‚è∞ Tiempo terminado! El examen se ha cerrado autom√°ticamente.');
                    return;
                }
                
                const minutes = Math.floor(remaining / 60000);
                const seconds = Math.floor((remaining % 60000) / 1000);
                
                document.getElementById('timerDisplay').innerText = 
                    `Tiempo restante: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
                
                // Alerta visual cuando quedan menos de 5 minutos
                if (remaining <= 5 * 60 * 1000) {
                    document.getElementById('timerDisplay').style.background = '#dc3545';
                    document.getElementById('timerDisplay').style.animation = 'pulse 1s infinite';
                }
            }, 1000);
        }

        // Funci√≥n para finalizar el examen
        function finishExam() {
            if (!examStarted) {
                alert('Debes iniciar el examen primero');
                return;
            }
            
            if (confirm('¬øEst√°s seguro de que deseas finalizar el examen?')) {
                clearInterval(timer);
                examEndTime = new Date();
                
                // Calcular tiempo empleado
                const timeUsed = Math.round((examEndTime - examStartTime) / 60000); // minutos
                
                // Calcular calificaci√≥n detallada
                calculateDetailedScore();
                
                // Generar p√°gina de resultados completa
                generateResultsPage(timeUsed);
                
                switchTab('results');
                alert('Examen finalizado y guardado exitosamente');
            }
        }

        // Funci√≥n para calcular calificaci√≥n detallada
        function calculateDetailedScore() {
            let ex1Score = 0;
            let ex2Score = 0;
            let ex3Score = 0;
            let ex4Score = 0;

            // Ejercicio 1 (2.5 puntos total)
            const circuit1a = document.querySelector('input[name="circuit1a"]:checked');
            const simplified1a = document.getElementById('ex1a_simplified').value.trim();
            const circuit1b = document.querySelector('input[name="circuit1b"]:checked');
            const simplified1b = document.getElementById('ex1b_simplified').value.trim();

            if (circuit1a && circuit1a.value === correctAnswers['1a'].circuit && 
                correctAnswers['1a'].simplified.includes(simplified1a)) {
                ex1Score += 1.25;
            }
            if (circuit1b && circuit1b.value === correctAnswers['1b'].circuit && 
                correctAnswers['1b'].simplified.includes(simplified1b)) {
                ex1Score += 1.25;
            }

            // Ejercicio 2 (2.5 puntos total)
            const expr2a = document.getElementById('ex2a_expression').value.trim();
            const simplified2b = document.getElementById('ex2b_simplified').value.trim();

            if (correctAnswers['2a'].expression.includes(expr2a)) {
                ex2Score += 1.0;
            }
            if (correctAnswers['2b'].simplified.includes(simplified2b)) {
                ex2Score += 1.5;
            }

            // Ejercicio 3 (2.5 puntos total)
            const table3Answers = [];
            for (let i = 0; i < 8; i++) {
                table3Answers.push(document.getElementById(`tt3_${i}`).value);
            }
            if (JSON.stringify(table3Answers) === JSON.stringify(correctAnswers['3table'])) {
                ex3Score += 1.0;
            }

            const simplified3 = document.getElementById('ex3_simplified').value.trim();
            if (correctAnswers['3simplified'].some(answer => 
                simplified3.toLowerCase().replace(/\s/g, '') === answer.toLowerCase().replace(/\s/g, ''))) {
                ex3Score += 1.5;
            }

            // Ejercicio 4 (2.5 puntos total)
            const table4Answers = [];
            for (let i = 0; i < 16; i++) {
                table4Answers.push(document.getElementById(`tt4_${i}`).value);
            }
            if (JSON.stringify(table4Answers) === JSON.stringify(correctAnswers['4table'])) {
                ex4Score += 1.0;
            }

            const karnaughAnswers = [];
            const kOrder = [0, 1, 3, 2, 4, 5, 7, 6, 12, 13, 15, 14, 8, 9, 11, 10];
            for (let i = 0; i < 16; i++) {
                const value = document.getElementById(`k_${i.toString().padStart(2, '0')}`).value;
                karnaughAnswers.push(value);
            }
            const orderedAnswers = kOrder.map(index => karnaughAnswers[index]);
            if (JSON.stringify(orderedAnswers) === JSON.stringify(correctAnswers['4karnaugh'])) {
                ex4Score += 1.0;
            }

            const simplified4 = document.getElementById('ex4_simplified').value.trim();
            if (correctAnswers['4simplified'].some(answer => 
                simplified4.toLowerCase().replace(/\s/g, '') === answer.toLowerCase().replace(/\s/g, ''))) {
                ex4Score += 0.5;
            }

            // Guardar puntuaciones
            studentScores = {
                ex1: Math.round(ex1Score * 10) / 10,
                ex2: Math.round(ex2Score * 10) / 10,
                ex3: Math.round(ex3Score * 10) / 10,
                ex4: Math.round(ex4Score * 10) / 10,
                total: Math.round((ex1Score + ex2Score + ex3Score + ex4Score) * 10) / 10
            };
        }

        // Funci√≥n para generar p√°gina de resultados completa
        function generateResultsPage(timeUsed) {
            const finalGrade = studentScores.total;
            const percentage = Math.round((finalGrade / 10) * 100);
            let gradeColor = '#dc3545'; // Rojo para reprobado
            let gradeStatus = 'REPROBADO';
            
            if (finalGrade >= 7.0) {
                gradeColor = '#28a745'; // Verde para aprobado
                gradeStatus = 'APROBADO';
            } else if (finalGrade >= 6.0) {
                gradeColor = '#ffc107'; // Amarillo para l√≠mite
                gradeStatus = 'L√çMITE';
            }

            const resultsArea = document.getElementById('resultsArea');
            resultsArea.innerHTML = `
                <div class="exercise-block">
                    <div class="exercise-header">
                        <h3>üìä UNIVERSIDAD DEL SABES - RESULTADOS OFICIALES</h3>
                        <p style="margin: 5px 0 0 0;">Campus San Felipe | Sistemas Digitales | Enero-Abril 2025</p>
                    </div>
                    
                    <!-- Informaci√≥n Institucional -->
                    <div class="exercise-part" style="background: #e3f2fd;">
                        <h4 style="color: #1565c0; margin-bottom: 15px;">üìã Informaci√≥n del Examen</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                            <div>
                                <p><strong>Universidad:</strong> Universidad del Sabes</p>
                                <p><strong>Campus:</strong> San Felipe</p>
                                <p><strong>Materia:</strong> Sistemas Digitales</p>
                                <p><strong>Actividad:</strong> ACT_03_SistemasDigitales</p>
                            </div>
                            <div>
                                <p><strong>Cuatrimestre:</strong> Enero-Abril 2025</p>
                                <p><strong>Profesor:</strong> Fausto No√© Jim√©nez</p>
                                <p><strong>Fecha:</strong> ${examEndTime.toLocaleDateString('es-MX')}</p>
                                <p><strong>Hora:</strong> ${examEndTime.toLocaleTimeString('es-MX')}</p>
                            </div>
                        </div>
                    </div>

                    <!-- Informaci√≥n del Estudiante -->
                    <div class="exercise-part">
                        <h4 style="color: #1e3c72; margin-bottom: 15px;">üë§ Datos del Estudiante</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                            <div>
                                <p><strong>Nombre:</strong> ${studentData.name}</p>
                                <p><strong>Matr√≠cula:</strong> ${studentData.matricula}</p>
                            </div>
                            <div>
                                <p><strong>Carrera:</strong> ${studentData.career}</p>
                                <p><strong>Grupo:</strong> ${studentData.group}</p>
                            </div>
                        </div>
                    </div>

                    <!-- Detalles del Examen -->
                    <div class="exercise-part" style="background: #f8f9fa;">
                        <h4 style="color: #1e3c72; margin-bottom: 15px;">‚è±Ô∏è Detalles de Aplicaci√≥n</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <p><strong>Versi√≥n:</strong> ${currentVersion}</p>
                            <p><strong>Tiempo empleado:</strong> ${timeUsed} minutos</p>
                            <p><strong>Tiempo l√≠mite:</strong> 30 minutos</p>
                            <p><strong>Intento:</strong> ${localStorage.getItem('attempts') || 1}</p>
                        </div>
                    </div>

                    <!-- Calificaci√≥n Final -->
                    <div class="exercise-part" style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border: 3px solid ${gradeColor};">
                        <h4 style="color: #1e3c72; margin-bottom: 20px; text-align: center;">üèÜ CALIFICACI√ìN FINAL</h4>
                        <div style="text-align: center; margin: 20px 0;">
                            <div style="font-size: 4em; font-weight: bold; color: ${gradeColor}; margin: 10px 0;">
                                ${finalGrade.toFixed(1)}
                            </div>
                            <div style="font-size: 1.5em; font-weight: bold; color: ${gradeColor}; margin: 10px 0;">
                                ${gradeStatus} (${percentage}%)
                            </div>
                        </div>
                    </div>

                    <!-- Desglose por Ejercicio -->
                    <div class="exercise-part">
                        <h4 style="color: #1e3c72; margin-bottom: 15px;">üìà Desglose de Puntuaci√≥n</h4>
                        <div style="display: grid; gap: 10px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f8f9fa; border-radius: 5px;">
                                <span><strong>Ejercicio 1:</strong> Dibujar Circuitos y Simplificar</span>
                                <span style="font-weight: bold; color: ${studentScores.ex1 >= 1.75 ? '#28a745' : '#dc3545'};">
                                    ${studentScores.ex1.toFixed(1)}/2.5
                                </span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f8f9fa; border-radius: 5px;">
                                <span><strong>Ejercicio 2:</strong> Simplificar Circuito L√≥gico</span>
                                <span style="font-weight: bold; color: ${studentScores.ex2 >= 1.75 ? '#28a745' : '#dc3545'};">
                                    ${studentScores.ex2.toFixed(1)}/2.5
                                </span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f8f9fa; border-radius: 5px;">
                                <span><strong>Ejercicio 3:</strong> Circuito de Mayor√≠a</span>
                                <span style="font-weight: bold; color: ${studentScores.ex3 >= 1.75 ? '#28a745' : '#dc3545'};">
                                    ${studentScores.ex3.toFixed(1)}/2.5
                                </span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f8f9fa; border-radius: 5px;">
                                <span><strong>Ejercicio 4:</strong> Mapas de Karnaugh</span>
                                <span style="font-weight: bold; color: ${studentScores.ex4 >= 1.75 ? '#28a745' : '#dc3545'};">
                                    ${studentScores.ex4.toFixed(1)}/2.5
                                </span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: ${gradeColor}; color: white; border-radius: 5px; font-size: 1.2em;">
                                <span><strong>TOTAL:</strong></span>
                                <span style="font-weight: bold;">${finalGrade.toFixed(1)}/10.0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Enlaces de Entrega -->
                    <div class="exercise-part" style="background: #fff3cd; border-left: 5px solid #ffc107;">
                        <h4 style="color: #856404; margin-bottom: 15px;">üìé Informaci√≥n de Entrega</h4>
                        <div style="color: #856404;">
                            <p><strong>P√°gina del curso para subir evidencias:</strong></p>
                            <p><a href="https://campusuniversidad.sabes.edu.mx/u2023/mod/assign/view.php?id=45284" target="_blank" style="color: #0056b3;">
                                üì§ Campus Universidad Sabes - Entrega de Actividades
                            </a></p>
                            
                            <p style="margin-top: 15px;"><strong>Plantilla para integrar evidencias:</strong></p>
                            <p><a href="https://fnjimenez.github.io/curso-sistemas-digitales/examen/ACT_03_SistemasDigitales_PrimerNombre_PrimerApellido.docx" target="_blank" style="color: #0056b3;">
                                üìÑ Descargar Plantilla ACT_03_SistemasDigitales
                            </a></p>
                            
                            <p style="margin-top: 15px;"><strong>Actividades de Laboratorio complementarias:</strong></p>
                            <p>‚Ä¢ <a href="https://campusuniversidad.sabes.edu.mx/u2023/mod/resource/view.php?id=45277" target="_blank" style="color: #0056b3;">
                                üî¨ LAB 4: Laboratorio de Sistemas Digitales
                            </a></p>
                            <p>‚Ä¢ <a href="https://campusuniversidad.sabes.edu.mx/u2023/mod/resource/view.php?id=45282" target="_blank" style="color: #0056b3;">
                                üî¨ LAB 5: Laboratorio de Sistemas Digitales
                            </a></p>
                        </div>
                    </div>

                    <!-- Instrucciones de Entrega -->
                    <div class="exercise-part" style="background: #d4edda; border-left: 5px solid #28a745;">
                        <h4 style="color: #155724; margin-bottom: 15px;">‚úÖ Instrucciones para Completar la Actividad</h4>
                        <div style="color: #155724;">
                            <ol>
                                <li><strong>Descarga la plantilla</strong> ACT_03_SistemasDigitales_TuNombre_TuApellido.docx</li>
                                <li><strong>Captura una imagen</strong> de esta p√°gina de resultados</li>
                                <li><strong>Completa las actividades</strong> LAB 4 y LAB 5</li>
                                <li><strong>Integra todas las evidencias</strong> en la plantilla descargada</li>
                                <li><strong>Sube el archivo completo</strong> al campus virtual</li>
                            </ol>
                            <p style="margin-top: 15px; font-weight: bold;">
                                üìã Evidencias requeridas: Examen + LAB 4 + LAB 5
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Botones de Acci√≥n -->
                <div style="text-align: center; margin-top: 30px; display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                    <button class="btn" onclick="window.print()" style="background: #17a2b8;">
                        üñ®Ô∏è Imprimir Resultados
                    </button>
                    <button class="btn" onclick="downloadPDF()" style="background: #dc3545;">
                        üìÑ Generar PDF
                    </button>
                    <button class="btn" onclick="copyResults()" style="background: #6f42c1;">
                        üìã Copiar Texto
                    </button>
                </div>
            `;
        }

        // Funci√≥n para generar PDF
        function downloadPDF() {
            try {
                // Verificar si jsPDF est√° disponible
                if (typeof window.jspdf === 'undefined') {
                    alert('‚ùå Error: La librer√≠a PDF no est√° disponible.\n\nüí° Soluci√≥n alternativa:\n‚Ä¢ Usa el bot√≥n "Imprimir" y selecciona "Guardar como PDF"\n‚Ä¢ O usa "Copiar Texto" para obtener los resultados');
                    return;
                }

                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                // Configurar fuente y tama√±o
                doc.setFontSize(18);
                doc.setFont("helvetica", "bold");
                doc.text('UNIVERSIDAD DEL SABES', 105, 20, { align: 'center' });
                
                doc.setFontSize(14);
                doc.setFont("helvetica", "normal");
                doc.text('Campus San Felipe', 105, 30, { align: 'center' });
                doc.text('Sistemas Digitales - Enero-Abril 2025', 105, 38, { align: 'center' });
                
                // L√≠nea separadora
                doc.line(20, 45, 190, 45);
                
                // Informaci√≥n del estudiante
                doc.setFontSize(12);
                doc.setFont("helvetica", "bold");
                doc.text('INFORMACI√ìN DEL ESTUDIANTE', 20, 55);
                
                doc.setFont("helvetica", "normal");
                doc.text(`Nombre: ${studentData.name}`, 20, 65);
                doc.text(`Matr√≠cula: ${studentData.matricula}`, 20, 73);
                doc.text(`Carrera: ${studentData.career}`, 20, 81);
                doc.text(`Grupo: ${studentData.group}`, 20, 89);
                
                // Detalles del examen
                doc.setFont("helvetica", "bold");
                doc.text('DETALLES DEL EXAMEN', 20, 105);
                
                doc.setFont("helvetica", "normal");
                doc.text(`Actividad: ACT_03_SistemasDigitales`, 20, 115);
                doc.text(`Profesor: Fausto No√© Jim√©nez`, 20, 123);
                doc.text(`Versi√≥n: ${currentVersion}`, 20, 131);
                doc.text(`Fecha: ${examEndTime.toLocaleDateString('es-MX')}`, 20, 139);
                doc.text(`Hora: ${examEndTime.toLocaleTimeString('es-MX')}`, 20, 147);
                
                // Calificaci√≥n final
                doc.setFontSize(16);
                doc.setFont("helvetica", "bold");
                doc.text('CALIFICACI√ìN FINAL', 20, 165);
                
                doc.setFontSize(24);
                const finalGrade = studentScores.total.toFixed(1);
                const gradeStatus = finalGrade >= 7.0 ? 'APROBADO' : finalGrade >= 6.0 ? 'L√çMITE' : 'REPROBADO';
                
                doc.text(`${finalGrade}/10.0`, 105, 180, { align: 'center' });
                
                doc.setFontSize(14);
                doc.text(`${gradeStatus}`, 105, 190, { align: 'center' });
                
                // Desglose por ejercicio
                doc.setFontSize(12);
                doc.setFont("helvetica", "bold");
                doc.text('DESGLOSE POR EJERCICIO', 20, 210);
                
                doc.setFont("helvetica", "normal");
                doc.text(`Ejercicio 1 (Dibujar Circuitos): ${studentScores.ex1.toFixed(1)}/2.5`, 20, 220);
                doc.text(`Ejercicio 2 (Simplificar Circuito): ${studentScores.ex2.toFixed(1)}/2.5`, 20, 228);
                doc.text(`Ejercicio 3 (Circuito de Mayor√≠a): ${studentScores.ex3.toFixed(1)}/2.5`, 20, 236);
                doc.text(`Ejercicio 4 (Mapas de Karnaugh): ${studentScores.ex4.toFixed(1)}/2.5`, 20, 244);
                
                // L√≠nea final
                doc.line(20, 250, 190, 250);
                doc.setFont("helvetica", "bold");
                doc.text(`TOTAL: ${studentScores.total.toFixed(1)}/10.0`, 20, 260);
                
                // Enlaces importantes
                doc.setFontSize(10);
                doc.setFont("helvetica", "normal");
                doc.text('Enlaces importantes:', 20, 280);
                doc.text('‚Ä¢ Campus: campusuniversidad.sabes.edu.mx/u2023/mod/assign/view.php?id=45284', 20, 288);
                doc.text('‚Ä¢ Plantilla: fnjimenez.github.io/curso-sistemas-digitales/examen/', 20, 296);
                
                // Guardar PDF con nombre espec√≠fico
                const fileName = `ACT_03_SistemasDigitales_${studentData.name.replace(/\s+/g, '_')}_${studentData.matricula}.pdf`;
                doc.save(fileName);
                
                alert('‚úÖ PDF generado exitosamente!\nüìÑ Archivo: ' + fileName);
                
            } catch (error) {
                console.error('Error al generar PDF:', error);
                alert(`‚ùå Error al generar PDF: ${error.message}\n\nüí° Alternativas:\n‚Ä¢ Usa "Imprimir" ‚Üí "Guardar como PDF"\n‚Ä¢ Usa "Copiar Texto" para obtener los resultados`);
            }
        }

        // Funci√≥n para copiar resultados
        function copyResults() {
            const text = `
UNIVERSIDAD DEL SABES - RESULTADOS EXAMEN
Campus: San Felipe
Materia: Sistemas Digitales
Cuatrimestre: Enero-Abril 2025

Estudiante: ${studentData.name}
Matr√≠cula: ${studentData.matricula}
Carrera: ${studentData.career}

Calificaci√≥n Final: ${studentScores.total.toFixed(1)}/10.0
Fecha: ${examEndTime.toLocaleDateString('es-MX')}
Versi√≥n: ${currentVersion}

Desglose:
- Ejercicio 1: ${studentScores.ex1.toFixed(1)}/2.5
- Ejercicio 2: ${studentScores.ex2.toFixed(1)}/2.5
- Ejercicio 3: ${studentScores.ex3.toFixed(1)}/2.5
- Ejercicio 4: ${studentScores.ex4.toFixed(1)}/2.5
            `;
            
            navigator.clipboard.writeText(text).then(() => {
                alert('üìã Resultados copiados al portapapeles');
            });
        }

        // Funci√≥n de inicializaci√≥n al cargar la p√°gina
        window.onload = function() {
            console.log('Examen de Sistemas Digitales cargado');
            
            // Aplicar animaciones
            document.querySelectorAll('.tab-content').forEach(section => {
                section.classList.add('fadeIn');
            });
        };

        // Animaci√≥n CSS adicional para el timer
        const style = document.createElement('style');
        style.textContent = `
            @keyframes pulse {
                0% { transform: scale(1); }
                50% { transform: scale(1.05); }
                100% { transform: scale(1); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
