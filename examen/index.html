<!DOCTYPE html>

<html lang="es">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Sistemas Digitales - Examen Completo</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js">
function switchTab(tabId) {
    // L√≥gica para cambiar de pesta√±a
}

function checkAnswer(answer) {
    // L√≥gica para verificar respuesta
}

function startExam() {
    // L√≥gica para iniciar examen
}

document.addEventListener('DOMContentLoaded', function() {
    // Event listeners y l√≥gica inicial
});
</script>
<style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
        }

        .course-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
            font-size: 0.9em;
        }

        .info-card {
            background: rgba(255, 255, 255, 0.15);
            padding: 10px;
            border-radius: 8px;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: #e9ecef;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #495057;
            border-right: 1px solid #dee2e6;
        }

        .tab:last-child {
            border-right: none;
        }

        .tab.active {
            background: white;
            color: #1e3c72;
            border-bottom: 3px solid #1e3c72;
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .student-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            background: #f8f9fa;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #1e3c72;
            background: white;
        }

        input[readonly] {
            background: #e9ecef;
            color: #6c757d;
        }

        .btn {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(30, 60, 114, 0.4);
        }

        .btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-success {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }

        .exercise-block {
            background: white;
            border: 3px solid #1e3c72;
            border-radius: 10px;
            margin: 20px 0;
            padding: 25px;
        }

        .exercise-header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 20px;
            margin: -25px -25px 25px -25px;
            border-radius: 7px 7px 0 0;
        }

        .exercise-part {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 5px solid #1e3c72;
        }

        .circuit-diagram {
            text-align: center;
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            margin: 15px 0;
        }

        .step-guide {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .step-guide h4 {
            color: #1976d2;
            margin-bottom: 10px;
        }

        .step-guide ol {
            margin-left: 20px;
        }

        .attempts-counter {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 8px 12px;
            margin: 10px 0;
            font-weight: bold;
        }

        .feedback {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
        }

        .feedback.correct {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }

        .feedback.incorrect {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }

        .feedback.neutral {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #6c757d;
            font-size: 1.1em;
        }

        .karnaugh-map, .truth-table {
            margin: 20px auto;
            border-collapse: collapse;
            background: white;
        }

        .karnaugh-map th, .karnaugh-map td,
        .truth-table th, .truth-table td {
            border: 2px solid #1e3c72;
            width: 50px;
            height: 50px;
            text-align: center;
            vertical-align: middle;
            font-weight: bold;
            padding: 10px;
        }

        .karnaugh-map th, .truth-table th {
            background: #1e3c72;
            color: white;
        }

        .karnaugh-map input, .truth-table input {
            width: 35px;
            height: 30px;
            text-align: center;
            border: 1px solid #ccc;
            border-radius: 3px;
            font-size: 16px;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }
            
            .student-info {
                grid-template-columns: 1fr;
            }
        }
    </style>
<style>
:root {
    --color-primario: #4CAF50;
    --color-secundario: #FF5722;
    --color-fondo: #F5F5F5;
    --color-texto: #333;
    --borde: 2px solid #4CAF50;
    --transicion: all 0.3s ease;
}

button, input, select, textarea {
    transition: var(--transicion);
}

button:hover, input:hover, select:hover, textarea:hover {
    transform: scale(1.05);
    opacity: 0.9;
}
</style></head>
<body>
<div class="container">
<div class="header">
<h1>üîß Examen Completo: Sistemas Digitales</h1>
<div class="course-info">
<div class="info-card"><strong>Asignatura:</strong> Sistemas Digitales</div>
<div class="info-card"><strong>Profesor:</strong> Fausto No√© Jim√©nez</div>
<div class="info-card"><strong>Cuatrimestre:</strong> 6¬∞ Mayo-Agosto 2025</div>
<div class="info-card"><strong>Semana:</strong> 04 (03-09 Junio)</div>
<div class="info-card"><strong>Tiempo:</strong> 2 horas aprox.</div>
<div class="info-card"><strong>Valor:</strong> 10 puntos</div>
</div>
</div>
<div class="tabs">
<button class="tab active" onclick="switchTab('student')">üë§ Estudiante</button>
<button class="tab" onclick="switchTab('ex1')">üìù Ejercicio 1</button>
<button class="tab" onclick="switchTab('ex2')">‚ö° Ejercicio 2</button>
<button class="tab" onclick="switchTab('ex3')">üí° Ejercicio 3</button>
<button class="tab" onclick="switchTab('ex4')">üó∫Ô∏è Ejercicio 4</button>
<button class="tab" onclick="switchTab('results')">üìä Resultados</button>
</div>
<!-- Datos del Estudiante -->
<div class="tab-content active" id="student">
<h2 style="margin-bottom: 20px; color: #1e3c72;">Informaci√≥n del Estudiante</h2>
<div class="student-info">
<div class="form-group">
<label>Seleccionar Matr√≠cula:</label>
<select id="studentSelect" onchange="updateStudentInfo()">
<option value="">-- Selecciona tu matr√≠cula --</option>
<optgroup label="Ingenier√≠a en Tecnolog√≠as de Informaci√≥n">
<option value="U2303057N0071">U2303057N0071 - GONZALEZ LARA MARTHA ESMERALDA</option>
<option value="U2303057N0141">U2303057N0141 - JARAMILLO ROMERO IVAN</option>
<option value="U2303057N0111">U2303057N0111 - JUAREZ JACINTO MARIO ADAN</option>
<option value="U2303057N0105">U2303057N0105 - MERINO ZAPIAIN ANA MAGDALA</option>
<option value="U2303057N0068">U2303057N0068 - PEREZ TAVERA GUADALUPE BERENICE</option>
<option value="U2303057N0116">U2303057N0116 - RANGEL AGUAYO ANGEL</option>
</optgroup>
<optgroup label="Ingenier√≠a Industrial">
<option value="U2303057N0155">U2303057N0155 - DE HARO SEGURA DENIEL</option>
<option value="U2303057N0020">U2303057N0020 - GARCIA ROMERO CENOBIO</option>
<option value="U2303057N0049">U2303057N0049 - GUTIERREZ GUTIERREZ DANNA LIZBETH</option>
<option value="U2303057N0080">U2303057N0080 - HERNANDEZ VILLEGAS FATIMA</option>
<option value="U2303057N0070">U2303057N0070 - LUCIO RODRIGUEZ EYMI JOSELIN</option>
<option value="U2303057N0012">U2303057N0012 - MACHUCA HERNANDEZ JUAN SOLEDAD</option>
<option value="U2303057N0021">U2303057N0021 - MEDELLIN MARQUEZ MAYRA JAZMIN</option>
<option value="U2303057N0046">U2303057N0046 - MEJIA BANDA LUIS ERNESTO</option>
<option value="U2303057N0086">U2303057N0086 - MEJIA CANO PERLA DEL CARMEN</option>
<option value="U2303057N0064">U2303057N0064 - MENDOZA FLORES SANDY</option>
<option value="U2303057N0108">U2303057N0108 - MORUA ZU√ëIGA PATRICIA BIRIDIANA</option>
<option value="U2203057N0070">U2203057N0070 - ORTIZ CHAVEZ JOSE MANUEL</option>
<option value="U2303057N0001">U2303057N0001 - ORTIZ ORTIZ LUIS ALEJANDRO</option>
<option value="U2303057N0110">U2303057N0110 - PEREZ RANGEL JORGE ARMANDO</option>
<option value="U2303057N0039">U2303057N0039 - ROCHA SALGADO JHONATAN ISAAC</option>
<option value="U2303057N0066">U2303057N0066 - RODRIGUEZ GARCIA DAISA GUADALUPE</option>
<option value="U2303057N0092">U2303057N0092 - RODRIGUEZ GARCIA MANUEL EDUARDO</option>
<option value="U2303057N0014">U2303057N0014 - RODRIGUEZ PADILLA JORGE ALBERTO</option>
<option value="U2303057N0041">U2303057N0041 - ROSALES MARQUEZ EDGAR</option>
<option value="U2303057N0077">U2303057N0077 - VEGA CORREA ROSA ISELA</option>
<option value="U2303057N0152">U2303057N0152 - YA√ëEZ BERNAL GEMMA</option>
</optgroup>
</select>
</div>
<div class="form-group">
<label>Nombre Completo:</label>
<input id="studentName" readonly="" type="text"/>
</div>
<div class="form-group">
<label>Carrera:</label>
<input id="studentCareer" readonly="" type="text"/>
</div>
<div class="form-group">
<label>Grupo:</label>
<input id="studentGroup" readonly="" type="text" value="5A"/>
</div>
</div>
<div style="text-align: center;">
<button class="btn btn-success" disabled="" id="startBtn" onclick="startExam()">üöÄ Comenzar Examen</button>
</div>
</div>
<!-- Ejercicio 1: Dibujar y Simplificar -->
<div class="tab-content" id="ex1">
<div class="exercise-block">
<div class="exercise-header">
<h3 style="margin: 0; font-size: 1.5em;">üìù Ejercicio 1: Dibujar Circuitos y Simplificar (2.5 puntos)</h3>
<p style="margin: 5px 0 0 0;">Dibuje el circuito l√≥gico y simplifique las expresiones</p>
</div>
<div class="step-guide">
<h4>üìã Instrucciones:</h4>
<ul>
<li>Use notaci√≥n est√°ndar: AND (¬∑), OR (+), NOT (')</li>
<li><strong>Ejemplo:</strong> A¬∑B' + C o simplemente AB' + C</li>
<li>Tiene <strong>5 intentos</strong> por pregunta</li>
</ul>
</div>
<div class="exercise-part">
<h4 style="color: #1e3c72;">a) AÃÖBÃÖ + AÃÖB (0.5 puntos)</h4>
<p><strong>Descripci√≥n del circuito:</strong></p>
<div style="margin: 15px 0;">
<input id="circuit1a_A" name="circuit1a" onchange="selectCircuitOption('1a', 'A')" type="radio" value="A"/>
<label for="circuit1a_A" style="margin-left: 10px; font-weight: normal;">
                            A) Las entradas A y B ‚Üí compuertas NOT ‚Üí van a una sola compuerta AND ‚Üí salida
                        </label>
</div>
<div style="margin: 15px 0;">
<input id="circuit1a_B" name="circuit1a" onchange="selectCircuitOption('1a', 'B')" type="radio" value="B"/>
<label for="circuit1a_B" style="margin-left: 10px; font-weight: normal;">
                            B) A y B ‚Üí compuertas NOT ‚Üí AÃÖ y BÃÖ van a AND, tambi√©n AÃÖ y B van a otra AND ‚Üí ambas salidas a OR
                        </label>
</div>
<div style="margin: 15px 0;">
<input id="circuit1a_C" name="circuit1a" onchange="selectCircuitOption('1a', 'C')" type="radio" value="C"/>
<label for="circuit1a_C" style="margin-left: 10px; font-weight: normal;">
                            C) A y B van directamente a compuertas AND, luego la salida pasa por NOT
                        </label>
</div>
<p><strong>Expresi√≥n simplificada:</strong></p>
<input id="ex1a_simplified" placeholder="Resultado de la simplificaci√≥n" type="text"/>
<button class="btn" onclick="checkAnswer('1a')">Validar</button>
<div class="attempts-counter">Intentos restantes: <span id="attempts1a">5</span></div>
<div id="feedback1a"></div>
</div>
<div class="exercise-part">
<h4 style="color: #1e3c72;">b) AB + AÃÖB + AÃÖBC (0.5 puntos)</h4>
<p><strong>Descripci√≥n del circuito:</strong></p>
<div style="margin: 15px 0;">
<input id="circuit1b_A" name="circuit1b" onchange="selectCircuitOption('1b', 'A')" type="radio" value="A"/>
<label for="circuit1b_A" style="margin-left: 10px; font-weight: normal;">
                            A) A y B ‚Üí AND, A pasa por NOT ‚Üí AÃÖ y B ‚Üí AND, AÃÖ y B y C ‚Üí AND de 3 entradas ‚Üí todas a OR
                        </label>
</div>
<div style="margin: 15px 0;">
<input id="circuit1b_B" name="circuit1b" onchange="selectCircuitOption('1b', 'B')" type="radio" value="B"/>
<label for="circuit1b_B" style="margin-left: 10px; font-weight: normal;">
                            B) A, B y C van directamente a una compuerta OR de 3 entradas
                        </label>
</div>
<div style="margin: 15px 0;">
<input id="circuit1b_C" name="circuit1b" onchange="selectCircuitOption('1b', 'C')" type="radio" value="C"/>
<label for="circuit1b_C" style="margin-left: 10px; font-weight: normal;">
                            C) Todas las variables pasan por NOT, luego van a compuertas AND
                        </label>
</div>
<p><strong>Expresi√≥n simplificada:</strong></p>
<input id="ex1b_simplified" placeholder="Resultado de la simplificaci√≥n" type="text"/>
<button class="btn" onclick="checkAnswer('1b')">Validar</button>
<div class="attempts-counter">Intentos restantes: <span id="attempts1b">5</span></div>
<div id="feedback1b"></div>
</div>
</div>
</div>
<!-- Ejercicio 2: Simplificaci√≥n de Circuito -->
<div class="tab-content" id="ex2">
<div class="exercise-block">
<div class="exercise-header">
<h3 style="margin: 0; font-size: 1.5em;">‚ö° Ejercicio 2: Simplificar Circuito L√≥gico (2.5 puntos)</h3>
<p style="margin: 5px 0 0 0;">Analice el circuito mostrado y simplif√≠quelo</p>
</div>
<div class="circuit-diagram">
<h4>Circuito a Simplificar:</h4>
<svg height="400" style="background: white; border: 2px solid #e9ecef; border-radius: 8px;" viewbox="0 0 700 400" width="700">
<defs>
<pattern height="20" id="grid" patternunits="userSpaceOnUse" width="20">
<path d="M 20 0 L 0 0 0 20" fill="none" stroke="#f0f0f0" stroke-width="1"></path>
</pattern>
<lineargradient id="andGradient" x1="0%" x2="100%" y1="0%" y2="100%">
<stop offset="0%" style="stop-color:#ffcc80;stop-opacity:1"></stop>
<stop offset="100%" style="stop-color:#ff9800;stop-opacity:1"></stop>
</lineargradient>
<lineargradient id="orGradient" x1="0%" x2="100%" y1="0%" y2="100%">
<stop offset="0%" style="stop-color:#ffab91;stop-opacity:1"></stop>
<stop offset="100%" style="stop-color:#ff5722;stop-opacity:1"></stop>
</lineargradient>
<lineargradient id="notGradient" x1="0%" x2="100%" y1="0%" y2="100%">
<stop offset="0%" style="stop-color:#fff59d;stop-opacity:1"></stop>
<stop offset="100%" style="stop-color:#ffc107;stop-opacity:1"></stop>
</lineargradient>
</defs>
<rect fill="url(#grid)" height="100%" width="100%"></rect>
<!-- Entradas -->
<text fill="#1e3c72" font-size="18" font-weight="bold" x="30" y="80">A</text>
<text fill="#1e3c72" font-size="18" font-weight="bold" x="30" y="200">B</text>
<text fill="#1e3c72" font-size="18" font-weight="bold" x="30" y="320">C</text>
<!-- L√≠neas principales -->
<line stroke="#2c3e50" stroke-width="3" x1="50" x2="120" y1="75" y2="75"></line>
<line stroke="#2c3e50" stroke-width="3" x1="50" x2="120" y1="195" y2="195"></line>
<line stroke="#2c3e50" stroke-width="3" x1="50" x2="120" y1="315" y2="315"></line>
<!-- Compuerta NOT para A -->
<g transform="translate(120, 60)">
<polygon fill="url(#notGradient)" points="0,0 0,30 25,15" stroke="#d84315" stroke-width="2"></polygon>
<circle cx="30" cy="15" fill="white" r="5" stroke="#d84315" stroke-width="2"></circle>
<line stroke="#2c3e50" stroke-width="3" x1="35" x2="55" y1="15" y2="15"></line>
</g>
<!-- Compuerta NOT para C -->
<g transform="translate(120, 300)">
<polygon fill="url(#notGradient)" points="0,0 0,30 25,15" stroke="#d84315" stroke-width="2"></polygon>
<circle cx="30" cy="15" fill="white" r="5" stroke="#d84315" stroke-width="2"></circle>
<line stroke="#2c3e50" stroke-width="3" x1="35" x2="55" y1="15" y2="15"></line>
</g>
<!-- Conexiones a ANDs -->
<line stroke="#2c3e50" stroke-width="2" x1="175" x2="220" y1="75" y2="75"></line>
<line stroke="#2c3e50" stroke-width="2" x1="220" x2="220" y1="75" y2="100"></line>
<line stroke="#2c3e50" stroke-width="2" x1="220" x2="250" y1="100" y2="100"></line>
<line stroke="#2c3e50" stroke-width="2" x1="120" x2="200" y1="195" y2="195"></line>
<circle cx="200" cy="195" fill="#2c3e50" r="3"></circle>
<line stroke="#2c3e50" stroke-width="2" x1="200" x2="200" y1="195" y2="140"></line>
<line stroke="#2c3e50" stroke-width="2" x1="200" x2="250" y1="140" y2="140"></line>
<line stroke="#2c3e50" stroke-width="2" x1="200" x2="200" y1="195" y2="250"></line>
<line stroke="#2c3e50" stroke-width="2" x1="200" x2="250" y1="250" y2="250"></line>
<line stroke="#2c3e50" stroke-width="2" x1="175" x2="230" y1="315" y2="315"></line>
<line stroke="#2c3e50" stroke-width="2" x1="230" x2="230" y1="315" y2="270"></line>
<line stroke="#2c3e50" stroke-width="2" x1="230" x2="250" y1="270" y2="270"></line>
<!-- Compuertas AND -->
<g transform="translate(250, 90)">
<rect fill="url(#andGradient)" height="60" stroke="#e65100" stroke-width="2" width="50" x="0" y="0"></rect>
<path d="M 50 0 Q 80 30 50 60" fill="url(#andGradient)" stroke="#e65100" stroke-width="2"></path>
<text fill="#bf360c" font-size="16" font-weight="bold" text-anchor="middle" x="25" y="38">&amp;</text>
<line stroke="#2c3e50" stroke-width="3" x1="80" x2="100" y1="30" y2="30"></line>
</g>
<g transform="translate(250, 230)">
<rect fill="url(#andGradient)" height="60" stroke="#e65100" stroke-width="2" width="50" x="0" y="0"></rect>
<path d="M 50 0 Q 80 30 50 60" fill="url(#andGradient)" stroke="#e65100" stroke-width="2"></path>
<text fill="#bf360c" font-size="16" font-weight="bold" text-anchor="middle" x="25" y="38">&amp;</text>
<line stroke="#2c3e50" stroke-width="3" x1="80" x2="100" y1="30" y2="30"></line>
</g>
<!-- Conexiones a OR -->
<line stroke="#2c3e50" stroke-width="3" x1="350" x2="420" y1="120" y2="120"></line>
<line stroke="#2c3e50" stroke-width="3" x1="350" x2="420" y1="260" y2="260"></line>
<line stroke="#2c3e50" stroke-width="2" x1="420" x2="420" y1="120" y2="170"></line>
<line stroke="#2c3e50" stroke-width="2" x1="420" x2="420" y1="260" y2="210"></line>
<!-- Compuerta OR -->
<g transform="translate(430, 160)">
<path d="M 0 0 Q 20 0 40 30 Q 20 60 0 60 Q 15 30 0 0" fill="url(#orGradient)" stroke="#c62828" stroke-width="2"></path>
<text fill="white" font-size="14" font-weight="bold" text-anchor="middle" x="20" y="35">‚â•1</text>
<line stroke="#2c3e50" stroke-width="4" x1="40" x2="80" y1="30" y2="30"></line>
</g>
<text fill="#1e3c72" font-size="18" font-weight="bold" x="530" y="200">Salida</text>
<text fill="#666" font-size="12" text-anchor="middle" x="355" y="250">BCÃÖ</text>
</svg>
</div>
<div class="exercise-part">
<h4 style="color: #1e3c72;">a) Indique la expresi√≥n del circuito original (1 punto)</h4>
<input id="ex2a_expression" placeholder="Ejemplo: A'B + BC' (NOT A AND B OR B AND NOT C)" type="text"/>
<button class="btn" onclick="checkAnswer('2a')">Validar</button>
<div class="attempts-counter">Intentos restantes: <span id="attempts2a">5</span></div>
<div id="feedback2a"></div>
</div>
<div class="exercise-part">
<h4 style="color: #1e3c72;">b) Expresi√≥n simplificada (1.5 puntos)</h4>
<input id="ex2b_simplified" placeholder="Ejemplo: A' o B'C + D (use apostrofe para NOT)" type="text"/>
<button class="btn" onclick="checkAnswer('2b')">Validar</button>
<div class="attempts-counter">Intentos restantes: <span id="attempts2b">5</span></div>
<div id="feedback2b"></div>
</div>
</div>
</div>
<!-- Ejercicio 3: Circuito de Mayor√≠a -->
<div class="tab-content" id="ex3">
<div class="exercise-block">
<div class="exercise-header">
<h3 style="margin: 0; font-size: 1.5em;">üí° Ejercicio 3: Circuito de Mayor√≠a (2.5 puntos)</h3>
<p style="margin: 5px 0 0 0;">Dise√±e un circuito que tenga salida ALTO cuando la mayor√≠a de entradas est√© en ALTO</p>
</div>
<div class="step-guide">
<h4>üìö ¬øQu√© es un Circuito de Mayor√≠a?</h4>
<p>Un <strong>circuito de mayor√≠a</strong> es un circuito l√≥gico que produce una salida <strong>ALTO (1)</strong> cuando la <em>mayor√≠a</em> de sus entradas est√°n en estado <strong>ALTO</strong>.</p>
<div style="background: #e8f5e8; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 5px solid #28a745;">
<h5 style="color: #1b5e20; margin-bottom: 10px;">üéØ Regla del Circuito de Mayor√≠a (3 entradas):</h5>
<ul style="color: #1b5e20; margin-left: 20px;">
<li><strong>Salida = 1</strong> cuando <strong>al menos 2 de las 3 entradas</strong> est√°n en <strong>1</strong></li>
<li><strong>Salida = 0</strong> cuando <strong>menos de 2 entradas</strong> est√°n en <strong>1</strong></li>
</ul>
</div>
<div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 5px solid #ffc107;">
<h5 style="color: #856404; margin-bottom: 10px;">üîç An√°lisis Paso a Paso:</h5>
<div style="color: #856404; font-size: 14px;">
<table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
<tr style="background: #f8f9fa;">
<th style="padding: 8px; border: 1px solid #ddd;">Caso</th>
<th style="padding: 8px; border: 1px solid #ddd;">Entradas (A,B,C)</th>
<th style="padding: 8px; border: 1px solid #ddd;">Cuenta de 1s</th>
<th style="padding: 8px; border: 1px solid #ddd;">¬øMayor√≠a?</th>
<th style="padding: 8px; border: 1px solid #ddd;">Salida Y</th>
</tr>
<tr>
<td style="padding: 8px; border: 1px solid #ddd;">1</td>
<td style="padding: 8px; border: 1px solid #ddd;">(0,0,0)</td>
<td style="padding: 8px; border: 1px solid #ddd;">0 unos</td>
<td style="padding: 8px; border: 1px solid #ddd;">‚ùå No (0 &lt; 2)</td>
<td style="padding: 8px; border: 1px solid #ddd; background: #ffebee;"><strong>0</strong></td>
</tr>
<tr>
<td style="padding: 8px; border: 1px solid #ddd;">2</td>
<td style="padding: 8px; border: 1px solid #ddd;">(0,0,1)</td>
<td style="padding: 8px; border: 1px solid #ddd;">1 uno</td>
<td style="padding: 8px; border: 1px solid #ddd;">‚ùå No (1 &lt; 2)</td>
<td style="padding: 8px; border: 1px solid #ddd; background: #ffebee;"><strong>0</strong></td>
</tr>
<tr>
<td style="padding: 8px; border: 1px solid #ddd;">3</td>
<td style="padding: 8px; border: 1px solid #ddd;">(0,1,0)</td>
<td style="padding: 8px; border: 1px solid #ddd;">1 uno</td>
<td style="padding: 8px; border: 1px solid #ddd;">‚ùå No (1 &lt; 2)</td>
<td style="padding: 8px; border: 1px solid #ddd; background: #ffebee;"><strong>0</strong></td>
</tr>
<tr>
<td style="padding: 8px; border: 1px solid #ddd;">4</td>
<td style="padding: 8px; border: 1px solid #ddd;">(0,1,1)</td>
<td style="padding: 8px; border: 1px solid #ddd;">2 unos</td>
<td style="padding: 8px; border: 1px solid #ddd;">‚úÖ S√≠ (2 ‚â• 2)</td>
<td style="padding: 8px; border: 1px solid #ddd; background: #e8f5e8;"><strong>1</strong></td>
</tr>
<tr>
<td style="padding: 8px; border: 1px solid #ddd;">5</td>
<td style="padding: 8px; border: 1px solid #ddd;">(1,0,0)</td>
<td style="padding: 8px; border: 1px solid #ddd;">1 uno</td>
<td style="padding: 8px; border: 1px solid #ddd;">‚ùå No (1 &lt; 2)</td>
<td style="padding: 8px; border: 1px solid #ddd; background: #ffebee;"><strong>0</strong></td>
</tr>
<tr>
<td style="padding: 8px; border: 1px solid #ddd;">6</td>
<td style="padding: 8px; border: 1px solid #ddd;">(1,0,1)</td>
<td style="padding: 8px; border: 1px solid #ddd;">2 unos</td>
<td style="padding: 8px; border: 1px solid #ddd;">‚úÖ S√≠ (2 ‚â• 2)</td>
<td style="padding: 8px; border: 1px solid #ddd; background: #e8f5e8;"><strong>1</strong></td>
</tr>
<tr>
<td style="padding: 8px; border: 1px solid #ddd;">7</td>
<td style="padding: 8px; border: 1px solid #ddd;">(1,1,0)</td>
<td style="padding: 8px; border: 1px solid #ddd;">2 unos</td>
<td style="padding: 8px; border: 1px solid #ddd;">‚úÖ S√≠ (2 ‚â• 2)</td>
<td style="padding: 8px; border: 1px solid #ddd; background: #e8f5e8;"><strong>1</strong></td>
</tr>
<tr>
<td style="padding: 8px; border: 1px solid #ddd;">8</td>
<td style="padding: 8px; border: 1px solid #ddd;">(1,1,1)</td>
<td style="padding: 8px; border: 1px solid #ddd;">3 unos</td>
<td style="padding: 8px; border: 1px solid #ddd;">‚úÖ S√≠ (3 ‚â• 2)</td>
<td style="padding: 8px; border: 1px solid #ddd; background: #e8f5e8;"><strong>1</strong></td>
</tr>
</table>
</div>
</div>
<div style="background: #d1ecf1; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 5px solid #17a2b8;">
<h5 style="color: #0c5460; margin-bottom: 10px;">üí° M√©todo Pr√°ctico:</h5>
<ol style="color: #0c5460; margin-left: 20px;">
<li><strong>Cuenta los 1s</strong> en cada fila (A + B + C)</li>
<li><strong>Si hay 2 o m√°s 1s</strong> ‚Üí La salida es <strong>1</strong></li>
<li><strong>Si hay menos de 2 unos</strong> ‚Üí La salida es <strong>0</strong></li>
</ol>
<div style="margin-top: 15px; padding: 10px; background: #b8daff; border-radius: 5px;">
<strong>üßÆ F√≥rmula r√°pida:</strong><br/>
<code>Salida = 1 si (A + B + C ‚â• 2), sino 0</code>
</div>
</div>
</div>
<div class="exercise-part">
<h4 style="color: #1e3c72;">Tabla de Verdad - Circuito de Mayor√≠a (1 punto)</h4>
<p><strong>Instrucciones:</strong> Complete la tabla aplicando la regla de mayor√≠a. La salida es <strong>1</strong> cuando <em>al menos 2 de las 3 entradas</em> son <strong>1</strong>.</p>
<table class="truth-table">
<thead>
<tr>
<th>A</th>
<th>B</th>
<th>C</th>
<th>Suma (A+B+C)</th>
<th>Salida Y</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td><td>0</td><td>0</td>
<td style="background: #f8f9fa; font-weight: bold;">0</td>
<td>
<select id="tt3_0" style="width: 50px; padding: 5px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td>
</tr>
<tr>
<td>0</td><td>0</td><td>1</td>
<td style="background: #f8f9fa; font-weight: bold;">1</td>
<td>
<select id="tt3_1" style="width: 50px; padding: 5px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td>
</tr>
<tr>
<td>0</td><td>1</td><td>0</td>
<td style="background: #f8f9fa; font-weight: bold;">1</td>
<td>
<select id="tt3_2" style="width: 50px; padding: 5px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td>
</tr>
<tr>
<td>0</td><td>1</td><td>1</td>
<td style="background: #e8f5e8; font-weight: bold; color: #1b5e20;">2 ‚úì</td>
<td>
<select id="tt3_3" style="width: 50px; padding: 5px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td>
</tr>
<tr>
<td>1</td><td>0</td><td>0</td>
<td style="background: #f8f9fa; font-weight: bold;">1</td>
<td>
<select id="tt3_4" style="width: 50px; padding: 5px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td>
</tr>
<tr>
<td>1</td><td>0</td><td>1</td>
<td style="background: #e8f5e8; font-weight: bold; color: #1b5e20;">2 ‚úì</td>
<td>
<select id="tt3_5" style="width: 50px; padding: 5px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td>
</tr>
<tr>
<td>1</td><td>1</td><td>0</td>
<td style="background: #e8f5e8; font-weight: bold; color: #1b5e20;">2 ‚úì</td>
<td>
<select id="tt3_6" style="width: 50px; padding: 5px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td>
</tr>
<tr>
<td>1</td><td>1</td><td>1</td>
<td style="background: #e8f5e8; font-weight: bold; color: #1b5e20;">3 ‚úì</td>
<td>
<select id="tt3_7" style="width: 50px; padding: 5px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td>
</tr>
</tbody>
</table>
<div style="margin: 15px 0; padding: 10px; background: #e3f2fd; border-radius: 5px; border-left: 5px solid #2196f3;">
<strong>üí≠ Pista:</strong> Observe la columna "Suma". Cuando la suma es ‚â• 2, la salida debe ser 1. Cuando la suma es &lt; 2, la salida debe ser 0.
                    </div>
<button class="btn" onclick="checkAnswer('3table')">Validar Tabla</button>
<div id="feedback3table"></div>
</div>
<div class="exercise-part">
<h4 style="color: #1e3c72;">Expresi√≥n simplificada (1.5 puntos)</h4>
<div style="background: #e8f5e8; padding: 20px; border-radius: 8px; margin: 15px 0; border-left: 5px solid #28a745;">
<h5 style="color: #1b5e20; margin-bottom: 15px;">üìö C√≥mo Crear la Expresi√≥n Simplificada:</h5>
<div style="color: #1b5e20; font-size: 14px;">
<h6 style="color: #2e7d32; margin: 15px 0 10px 0;"><strong>Paso 1: Identificar los Mint√©rminos</strong></h6>
<p>Busque en su tabla de verdad todas las filas donde la <strong>Salida Y = 1</strong>. Cada una de estas filas representa un <em>mint√©rmino</em>.</p>
<h6 style="color: #2e7d32; margin: 15px 0 10px 0;"><strong>Paso 2: Escribir cada Mint√©rmino</strong></h6>
<p>Para cada fila con salida = 1, escriba el producto de las variables siguiendo esta regla:</p>
<ul style="margin-left: 20px;">
<li>Si la variable es <strong>0</strong> ‚Üí use la variable <strong>negada</strong> (A', B', C')</li>
<li>Si la variable es <strong>1</strong> ‚Üí use la variable <strong>normal</strong> (A, B, C)</li>
</ul>
<div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin: 15px 0;">
<h6 style="color: #856404; margin-bottom: 10px;"><strong>üí° Ejemplo para Circuito de Mayor√≠a:</strong></h6>
<table style="border-collapse: collapse; width: 100%; font-size: 12px;">
<tr style="background: #f8f9fa;">
<th style="padding: 5px; border: 1px solid #ddd;">Fila</th>
<th style="padding: 5px; border: 1px solid #ddd;">A</th>
<th style="padding: 5px; border: 1px solid #ddd;">B</th>
<th style="padding: 5px; border: 1px solid #ddd;">C</th>
<th style="padding: 5px; border: 1px solid #ddd;">Salida</th>
<th style="padding: 5px; border: 1px solid #ddd;">Mint√©rmino</th>
</tr>
<tr>
<td style="padding: 5px; border: 1px solid #ddd;">4</td>
<td style="padding: 5px; border: 1px solid #ddd;">0</td>
<td style="padding: 5px; border: 1px solid #ddd;">1</td>
<td style="padding: 5px; border: 1px solid #ddd;">1</td>
<td style="padding: 5px; border: 1px solid #ddd; background: #d4edda;"><strong>1</strong></td>
<td style="padding: 5px; border: 1px solid #ddd;"><code>A'BC</code></td>
</tr>
<tr>
<td style="padding: 5px; border: 1px solid #ddd;">6</td>
<td style="padding: 5px; border: 1px solid #ddd;">1</td>
<td style="padding: 5px; border: 1px solid #ddd;">0</td>
<td style="padding: 5px; border: 1px solid #ddd;">1</td>
<td style="padding: 5px; border: 1px solid #ddd; background: #d4edda;"><strong>1</strong></td>
<td style="padding: 5px; border: 1px solid #ddd;"><code>AB'C</code></td>
</tr>
<tr>
<td style="padding: 5px; border: 1px solid #ddd;">7</td>
<td style="padding: 5px; border: 1px solid #ddd;">1</td>
<td style="padding: 5px; border: 1px solid #ddd;">1</td>
<td style="padding: 5px; border: 1px solid #ddd;">0</td>
<td style="padding: 5px; border: 1px solid #ddd; background: #d4edda;"><strong>1</strong></td>
<td style="padding: 5px; border: 1px solid #ddd;"><code>ABC'</code></td>
</tr>
<tr>
<td style="padding: 5px; border: 1px solid #ddd;">8</td>
<td style="padding: 5px; border: 1px solid #ddd;">1</td>
<td style="padding: 5px; border: 1px solid #ddd;">1</td>
<td style="padding: 5px; border: 1px solid #ddd;">1</td>
<td style="padding: 5px; border: 1px solid #ddd; background: #d4edda;"><strong>1</strong></td>
<td style="padding: 5px; border: 1px solid #ddd;"><code>ABC</code></td>
</tr>
</table>
</div>
<h6 style="color: #2e7d32; margin: 15px 0 10px 0;"><strong>Paso 3: Sumar todos los Mint√©rminos</strong></h6>
<p>Combine todos los mint√©rminos con el operador OR (+):</p>
<div style="background: #f8f9fa; padding: 10px; border-radius: 5px; font-family: monospace; margin: 10px 0;">
<strong>Funci√≥n inicial:</strong> Y = A'BC + AB'C + ABC' + ABC
                            </div>
<h6 style="color: #2e7d32; margin: 15px 0 10px 0;"><strong>Paso 4: Simplificar usando √Ålgebra Booleana</strong></h6>
<p>Aplique las leyes de simplificaci√≥n para reducir la expresi√≥n:</p>
<div style="background: #f8f9fa; padding: 15px; border-radius: 5px; font-family: monospace; margin: 10px 0; line-height: 1.6;">
                                Y = A'BC + AB'C + ABC' + ABC<br/>
                                Y = A'BC + AB'C + ABC' + ABC<br/>
                                Y = BC(A' + A) + AB'C + ABC'   <em>[Factorizar BC]</em><br/>
                                Y = BC(1) + AB'C + ABC'        <em>[A' + A = 1]</em><br/>
                                Y = BC + AB'C + ABC'           <em>[BC¬∑1 = BC]</em><br/>
                                Y = BC + AC(B' + B')            <em>[Factorizar AC]</em><br/>
                                Y = BC + AC(1)                 <em>[B' + B = 1]</em><br/>
                                Y = BC + AC                     <em>[AC¬∑1 = AC]</em><br/>
                                Y = BC + AC + AB                <em>[T√©rmino faltante]</em>
</div>
<div style="background: #d1ecf1; padding: 10px; border-radius: 5px; margin: 15px 0;">
<strong style="color: #0c5460;">üìã Resultado Final:</strong><br/>
<code style="font-size: 16px; color: #0c5460;">Y = AB + AC + BC</code>
</div>
<h6 style="color: #2e7d32; margin: 15px 0 10px 0;"><strong>Formatos Aceptados:</strong></h6>
<ul style="margin-left: 20px;">
<li><code>AB + AC + BC</code></li>
<li><code>AB + BC + AC</code></li>
<li><code>BC + AB + AC</code></li>
<li>Cualquier orden de los t√©rminos</li>
</ul>
</div>
</div>
<input id="ex3_simplified" placeholder="Escriba la expresi√≥n booleana simplificada aqu√≠" type="text"/>
<button class="btn" onclick="checkAnswer('3simplified')">Validar</button>
<div class="attempts-counter">Intentos restantes: <span id="attempts3simplified">5</span></div>
<div id="feedback3simplified"></div>
</div>
</div>
</div>
<!-- Ejercicio 4: Mapas de Karnaugh -->
<div class="tab-content" id="ex4">
<div class="exercise-block">
<div class="exercise-header">
<h3 style="margin: 0; font-size: 1.5em;">üó∫Ô∏è Ejercicio 4: Mapas de Karnaugh (2.5 puntos)</h3>
<p style="margin: 5px 0 0 0;">Utilice los mapas de Karnaugh para simplificar la expresi√≥n</p>
</div>
<div class="exercise-part">
<h4 style="color: #1e3c72;">Expresi√≥n a simplificar:</h4>
<div style="text-align: center; font-size: 1.2em; font-weight: bold; margin: 20px 0; padding: 15px; background: #fff3cd; border-radius: 8px;">
                        Y = CÃÖ(ABÃÖDÃÖ + D) + AÃÖBC + DÃÖ
                    </div>
</div>
<div class="exercise-part">
<h4 style="color: #1e3c72;">Paso 1: Tabla de Verdad (1 punto)</h4>
<p>Complete la tabla de verdad para la expresi√≥n dada:</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; align-items: start;">
<table class="truth-table" style="font-size: 12px;">
<thead>
<tr>
<th>A</th><th>B</th><th>C</th><th>D</th><th>Y</th>
</tr>
</thead>
<tbody>
<tr><td>0</td><td>0</td><td>0</td><td>0</td><td>
<select id="tt4_0" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td></tr>
<tr><td>0</td><td>0</td><td>0</td><td>1</td><td>
<select id="tt4_1" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td></tr>
<tr><td>0</td><td>0</td><td>1</td><td>0</td><td>
<select id="tt4_2" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td></tr>
<tr><td>0</td><td>0</td><td>1</td><td>1</td><td>
<select id="tt4_3" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td></tr>
<tr><td>0</td><td>1</td><td>0</td><td>0</td><td>
<select id="tt4_4" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td></tr>
<tr><td>0</td><td>1</td><td>0</td><td>1</td><td>
<select id="tt4_5" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td></tr>
<tr><td>0</td><td>1</td><td>1</td><td>0</td><td>
<select id="tt4_6" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td></tr>
<tr><td>0</td><td>1</td><td>1</td><td>1</td><td>
<select id="tt4_7" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td></tr>
</tbody>
</table>
<table class="truth-table" style="font-size: 12px;">
<thead>
<tr>
<th>A</th><th>B</th><th>C</th><th>D</th><th>Y</th>
</tr>
</thead>
<tbody>
<tr><td>1</td><td>0</td><td>0</td><td>0</td><td>
<select id="tt4_8" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td></tr>
<tr><td>1</td><td>0</td><td>0</td><td>1</td><td>
<select id="tt4_9" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td></tr>
<tr><td>1</td><td>0</td><td>1</td><td>0</td><td>
<select id="tt4_10" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td></tr>
<tr><td>1</td><td>0</td><td>1</td><td>1</td><td>
<select id="tt4_11" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td></tr>
<tr><td>1</td><td>1</td><td>0</td><td>0</td><td>
<select id="tt4_12" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td></tr>
<tr><td>1</td><td>1</td><td>0</td><td>1</td><td>
<select id="tt4_13" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td></tr>
<tr><td>1</td><td>1</td><td>1</td><td>0</td><td>
<select id="tt4_14" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td></tr>
<tr><td>1</td><td>1</td><td>1</td><td>1</td><td>
<select id="tt4_15" style="width: 40px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td></tr>
</tbody>
</table>
</div>
<div style="margin: 15px 0;">
<button class="btn" onclick="checkAnswer('4table')">Validar Tabla de Verdad</button>
<div id="feedback4table"></div>
</div>
</div>
<div class="exercise-part">
<h4 style="color: #1e3c72;">Paso 2: Mapa de Karnaugh (1 punto)</h4>
<p>Transfiera los valores de la tabla de verdad al mapa K:</p>
<table class="karnaugh-map">
<thead>
<tr>
<th>AB\CD</th><th>00</th><th>01</th><th>11</th><th>10</th>
</tr>
</thead>
<tbody>
<tr>
<td style="background: #1e3c72; color: white; font-weight: bold;">00</td>
<td>
<select id="k_00" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td>
<td>
<select id="k_01" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td>
<td>
<select id="k_03" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td>
<td>
<select id="k_02" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td>
</tr>
<tr>
<td style="background: #1e3c72; color: white; font-weight: bold;">01</td>
<td>
<select id="k_04" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td>
<td>
<select id="k_05" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td>
<td>
<select id="k_07" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td>
<td>
<select id="k_06" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td>
</tr>
<tr>
<td style="background: #1e3c72; color: white; font-weight: bold;">11</td>
<td>
<select id="k_12" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td>
<td>
<select id="k_13" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td>
<td>
<select id="k_15" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td>
<td>
<select id="k_14" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td>
</tr>
<tr>
<td style="background: #1e3c72; color: white; font-weight: bold;">10</td>
<td>
<select id="k_08" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td>
<td>
<select id="k_09" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td>
<td>
<select id="k_11" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td>
<td>
<select id="k_10" style="width: 45px; padding: 2px; border: 2px solid #e9ecef; border-radius: 4px; text-align: center;">
<option value="">?</option>
<option value="0">0</option>
<option value="1">1</option>
</select>
</td>
</tr>
</tbody>
</table>
<button class="btn" onclick="checkAnswer('4karnaugh')">Validar Mapa K</button>
<div id="feedback4karnaugh"></div>
</div>
<div class="exercise-part">
<h4 style="color: #1e3c72;">Expresi√≥n Simplificada (0.5 puntos)</h4>
<input id="ex4_simplified" placeholder="Expresi√≥n simplificada usando agrupaciones del mapa K" type="text"/>
<button class="btn" onclick="checkAnswer('4simplified')">Validar</button>
<div class="attempts-counter">Intentos restantes: <span id="attempts4simplified">5</span></div>
<div id="feedback4simplified"></div>
</div>
</div>
</div>
<!-- Resultados -->
<div class="tab-content" id="results">
<div id="resultsArea">
<div class="loading">Los resultados aparecer√°n aqu√≠ al completar el examen</div>
</div>
<div style="text-align: center; margin-top: 20px;">
<button class="btn btn-success" onclick="finishExam()">üìù Generar Calificaci√≥n Final</button>
</div>
</div>
</div>

<script>
        // ===== VARIABLES GLOBALES =====
        const studentsDatabase = {
            "U2303057N0071": { name: "GONZALEZ LARA MARTHA ESMERALDA", career: "Licenciatura en Ingenier√≠a en Tecnolog√≠as de Informaci√≥n" },
            "U2303057N0141": { name: "JARAMILLO ROMERO IVAN", career: "Licenciatura en Ingenier√≠a en Tecnolog√≠as de Informaci√≥n" },
            "U2303057N0111": { name: "JUAREZ JACINTO MARIO ADAN", career: "Licenciatura en Ingenier√≠a en Tecnolog√≠as de Informaci√≥n" },
            "U2303057N0105": { name: "MERINO ZAPIAIN ANA MAGDALA", career: "Licenciatura en Ingenier√≠a en Tecnolog√≠as de Informaci√≥n" },
            "U2303057N0068": { name: "PEREZ TAVERA GUADALUPE BERENICE", career: "Licenciatura en Ingenier√≠a en Tecnolog√≠as de Informaci√≥n" },
            "U2303057N0116": { name: "RANGEL AGUAYO ANGEL", career: "Licenciatura en Ingenier√≠a en Tecnolog√≠as de Informaci√≥n" },
            "U2303057N0155": { name: "DE HARO SEGURA DENIEL", career: "Licenciatura en Ingenier√≠a Industrial" },
            "U2303057N0020": { name: "GARCIA ROMERO CENOBIO", career: "Licenciatura en Ingenier√≠a Industrial" },
            "U2303057N0049": { name: "GUTIERREZ GUTIERREZ DANNA LIZBETH", career: "Licenciatura en Ingenier√≠a Industrial" },
            "U2303057N0080": { name: "HERNANDEZ VILLEGAS FATIMA", career: "Licenciatura en Ingenier√≠a Industrial" },
            "U2303057N0070": { name: "LUCIO RODRIGUEZ EYMI JOSELIN", career: "Licenciatura en Ingenier√≠a Industrial" },
            "U2303057N0012": { name: "MACHUCA HERNANDEZ JUAN SOLEDAD", career: "Licenciatura en Ingenier√≠a Industrial" },
            "U2303057N0021": { name: "MEDELLIN MARQUEZ MAYRA JAZMIN", career: "Licenciatura en Ingenier√≠a Industrial" },
            "U2303057N0046": { name: "MEJIA BANDA LUIS ERNESTO", career: "Licenciatura en Ingenier√≠a Industrial" },
            "U2303057N0086": { name: "MEJIA CANO PERLA DEL CARMEN", career: "Licenciatura en Ingenier√≠a Industrial" },
            "U2303057N0064": { name: "MENDOZA FLORES SANDY", career: "Licenciatura en Ingenier√≠a Industrial" },
            "U2303057N0108": { name: "MORUA ZU√ëIGA PATRICIA BIRIDIANA", career: "Licenciatura en Ingenier√≠a Industrial" },
            "U2203057N0070": { name: "ORTIZ CHAVEZ JOSE MANUEL", career: "Licenciatura en Ingenier√≠a Industrial" },
            "U2303057N0001": { name: "ORTIZ ORTIZ LUIS ALEJANDRO", career: "Licenciatura en Ingenier√≠a Industrial" },
            "U2303057N0110": { name: "PEREZ RANGEL JORGE ARMANDO", career: "Licenciatura en Ingenier√≠a Industrial" },
            "U2303057N0039": { name: "ROCHA SALGADO JHONATAN ISAAC", career: "Licenciatura en Ingenier√≠a Industrial" },
            "U2303057N0066": { name: "RODRIGUEZ GARCIA DAISA GUADALUPE", career: "Licenciatura en Ingenier√≠a Industrial" },
            "U2303057N0092": { name: "RODRIGUEZ GARCIA MANUEL EDUARDO", career: "Licenciatura en Ingenier√≠a Industrial" },
            "U2303057N0014": { name: "RODRIGUEZ PADILLA JORGE ALBERTO", career: "Licenciatura en Ingenier√≠a Industrial" },
            "U2303057N0041": { name: "ROSALES MARQUEZ EDGAR", career: "Licenciatura en Ingenier√≠a Industrial" },
            "U2303057N0077": { name: "VEGA CORREA ROSA ISELA", career: "Licenciatura en Ingenier√≠a Industrial" },
            "U2303057N0152": { name: "YA√ëEZ BERNAL GEMMA", career: "Licenciatura en Ingenier√≠a Industrial" }
        };

        let currentStudent = null;
        let examAnswers = {};
        let circuitAnswers = {};
        let attempts = {
            '1a': 5, '1b': 5,
            '2a': 5, '2b': 5,
            '3simplified': 5,
            '4simplified': 5
        };

        // ===== VARIACIONES DE EJERCICIOS =====
        const exerciseVariants = {
            // Ejercicio 1a - 5 variantes
            ex1a: [
                {
                    expression: "AÃÖBÃÖ + AÃÖB",
                    answer: ["A'", "AÃÖ", "~A"],
                    circuit_correct: "B"
                },
                {
                    expression: "X»≤ + XY", 
                    answer: ["X", "X"],
                    circuit_correct: "A"
                },
                {
                    expression: "PÃÖQÃÖ + PÃÖQ",
                    answer: ["P'", "PÃÖ", "~P"],
                    circuit_correct: "B"
                },
                {
                    expression: "MÃÖN + MN",
                    answer: ["N", "N"],
                    circuit_correct: "A"
                },
                {
                    expression: "ABÃÖ + AB",
                    answer: ["A", "A"],
                    circuit_correct: "B"
                }
            ],

            // Ejercicio 1b - 5 variantes
            ex1b: [
                {
                    expression: "AB + AÃÖB + AÃÖBC",
                    answer: ["B", "B"],
                    circuit_correct: "A"
                },
                {
                    expression: "XY + XÃÖY + XYZ",
                    answer: ["Y", "Y"],
                    circuit_correct: "B"
                },
                {
                    expression: "PQ + PÃÖQ + PQR",
                    answer: ["Q", "Q"],
                    circuit_correct: "A"
                },
                {
                    expression: "MN + MÃÖN + MÃÖNO",
                    answer: ["N", "N"],
                    circuit_correct: "B"
                },
                {
                    expression: "ST + SÃÖT + SÃÖTU",
                    answer: ["T", "T"],
                    circuit_correct: "A"
                }
            ],

            // Ejercicio 3 - 5 variantes
            ex3: [
                {
                    title: "Circuito de Mayor√≠a",
                    description: "La salida es 1 cuando al menos 2 de las 3 entradas son 1",
                    rule: "Salida = 1 si (A + B + C ‚â• 2)",
                    truthTable: [0, 0, 0, 1, 0, 1, 1, 1],
                    simplified: ["AB + AC + BC", "AB + BC + AC", "BC + AB + AC", "AC + AB + BC", "AC + BC + AB", "BC + AC + AB"]
                },
                {
                    title: "Circuito de Unanimidad",
                    description: "La salida es 1 solo cuando TODAS las entradas son 1",
                    rule: "Salida = 1 si (A = 1 AND B = 1 AND C = 1)",
                    truthTable: [0, 0, 0, 0, 0, 0, 0, 1],
                    simplified: ["ABC", "A*B*C", "A¬∑B¬∑C"]
                },
                {
                    title: "Circuito de Minor√≠a",
                    description: "La salida es 1 cuando m√°ximo 1 entrada es 1 (minor√≠a)",
                    rule: "Salida = 1 si (A + B + C ‚â§ 1)",
                    truthTable: [1, 1, 1, 0, 1, 0, 0, 0],
                    simplified: ["A'B'C' + A'B'C + A'BC' + AB'C'", "A'B' + A'C' + B'C'"]
                },
                {
                    title: "Circuito Par",
                    description: "La salida es 1 cuando un n√∫mero PAR de entradas son 1",
                    rule: "Salida = 1 si (A + B + C) es par",
                    truthTable: [1, 0, 0, 1, 0, 1, 1, 0],
                    simplified: ["A'B'C' + A'BC + AB'C + ABC'", "(A‚äïB‚äïC)'"]
                },
                {
                    title: "Circuito OR Exclusivo Triple",
                    description: "La salida es 1 cuando exactamente 1 o exactamente 3 entradas son 1",
                    rule: "Salida = 1 si (A + B + C = 1) OR (A + B + C = 3)",
                    truthTable: [0, 1, 1, 0, 1, 0, 0, 1],
                    simplified: ["A'B'C + A'BC' + AB'C' + ABC", "A‚äïB‚äïC"]
                }
            ],

            // Ejercicio 4 - 5 variantes
            ex4: [
                {
                    expression: "CÃÖ(ABÃÖDÃÖ + D) + AÃÖBC + DÃÖ",
                    truthTable: [1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1],
                    simplified: ["CÃÖ + DÃÖ", "DÃÖ + CÃÖ", "~C + ~D", "C' + D'", "D' + C'"]
                },
                {
                    expression: "AÃÖ(BDÃÖ + C) + ABÃÖCÃÖ + CÃÖDÃÖ",
                    truthTable: [1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0],
                    simplified: ["AÃÖ + BÃÖCÃÖ", "~A + ~B~C", "A' + B'C'"]
                },
                {
                    expression: "BÃÖ(ACÃÖ + DÃÖ) + ABC + CD",
                    truthTable: [1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 0, 1, 1, 1],
                    simplified: ["BÃÖ + CD", "~B + CD", "B' + CD"]
                },
                {
                    expression: "D(AÃÖB + CÃÖ) + AÃÖBÃÖCÃÖDÃÖ + BCÃÖDÃÖ",
                    truthTable: [1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0],
                    simplified: ["AÃÖBÃÖCÃÖ + BCÃÖ", "~A~B~C + B~C", "A'B'C' + BC'"]
                },
                {
                    expression: "A(BÃÖD + C) + BÃÖCÃÖDÃÖ + ACDÃÖ",
                    truthTable: [1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1],
                    simplified: ["BÃÖCÃÖDÃÖ + AC", "~B~C~D + AC", "B'C'D' + AC"]
                }
            ]
        };

        // ===== RESPUESTAS CORRECTAS (se actualizan por versi√≥n) =====
        let correctAnswers = {
            '1a_simplified': ['A\'', 'AÃÖ', '~A'],
            '1b_simplified': ['B', 'B'],
            '2a_expression': ['A\'B + BC\'', 'AÃÖB + BCÃÖ', '~AB + BC\'', 'A\'B + BC\'', 'A\'B+BC\''],
            '2b_simplified': ['B', 'B(A\' + C\')', 'B(AÃÖ + CÃÖ)'],
            '3simplified': ['AB + AC + BC', 'AB + BC + AC', 'BC + AB + AC'],
            '4simplified': ['CÃÖ + DÃÖ', 'DÃÖ + CÃÖ', '~C + ~D']
        };

        const correctCircuitAnswers = {
            '1a': 'B',
            '1b': 'A'
        };

        let correctTruthTables = {
            ex3: [0, 0, 0, 1, 0, 1, 1, 1],
            ex4: [1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0]
        };

        // ===== FUNCI√ìN PARA GENERAR VERSI√ìN √öNICA =====
        function generateStudentVersion(studentId) {
            const numericPart = studentId.replace(/\D/g, '');
            const hash = parseInt(numericPart.slice(-3)) || 0;
            const version = hash % 5;
            console.log(`Estudiante ${studentId} ‚Üí Versi√≥n ${version}`);
            return version;
        }

        // ===== FUNCI√ìN PARA CARGAR EJERCICIOS POR VERSI√ìN =====
        function loadStudentExercises(version) {
            try {
                console.log(`üîÑ Cargando ejercicios para versi√≥n ${version}...`);
                
                loadExercise1(version);
                loadExercise3(version);
                loadExercise4(version);
                updateCorrectAnswers(version);

                console.log('üéâ Todos los ejercicios cargados correctamente para versi√≥n:', version);
                
            } catch (error) {
                console.error('‚ùå Error cr√≠tico al cargar ejercicios:', error);
                console.log('üîÑ Usando ejercicios por defecto (versi√≥n 0)');
                updateCorrectAnswers(0);
            }
        }

        function loadExercise1(version) {
            // Actualizar Ejercicio 1a
            const ex1a = exerciseVariants.ex1a[version];
            const ex1aTitle = document.querySelector('#ex1 .exercise-part h4');
            if (ex1aTitle) {
                ex1aTitle.innerHTML = `a) ${ex1a.expression} (0.5 puntos)`;
            }

            // Actualizar Ejercicio 1b
            const ex1b = exerciseVariants.ex1b[version];
            const allEx1Parts = document.querySelectorAll('#ex1 .exercise-part h4');
            if (allEx1Parts[1]) {
                allEx1Parts[1].innerHTML = `b) ${ex1b.expression} (0.5 puntos)`;
            }
        }

        function loadExercise3(version) {
            const ex3Data = exerciseVariants.ex3[version];
            
            // Actualizar t√≠tulo del ejercicio
            const ex3Header = document.querySelector('#ex3 .exercise-header h3');
            if (ex3Header) {
                ex3Header.innerHTML = `üí° Ejercicio 3: ${ex3Data.title} (2.5 puntos)`;
            }

            // Actualizar descripci√≥n del ejercicio
            const ex3HeaderDesc = document.querySelector('#ex3 .exercise-header p');
            if (ex3HeaderDesc) {
                ex3HeaderDesc.innerHTML = ex3Data.description;
            }

            // Actualizar completamente la gu√≠a paso a paso
            const stepGuideDiv = document.querySelector('#ex3 .step-guide');
            if (stepGuideDiv) {
                stepGuideDiv.innerHTML = generateStepGuideHTML(ex3Data);
            }

            // Actualizar t√≠tulo de la tabla de verdad
            const tableTitle = document.querySelector('#ex3 .exercise-part h4');
            if (tableTitle) {
                tableTitle.innerHTML = `Tabla de Verdad - ${ex3Data.title} (1 punto)`;
            }

            // Actualizar instrucciones de la tabla
            const tableInstructions = document.querySelector('#ex3 .exercise-part p');
            if (tableInstructions) {
                tableInstructions.innerHTML = `<strong>Instrucciones:</strong> Complete la tabla aplicando la regla: <em>${ex3Data.description}</em>`;
            }

            // Actualizar la pista espec√≠fica
            const hintDiv = document.querySelector('#ex3 .exercise-part div[style*="background: #e3f2fd"]');
            if (hintDiv) {
                hintDiv.innerHTML = `<strong>üí≠ Pista:</strong> ${generateHintText(ex3Data)}`;
            }

            // Actualizar las instrucciones de la expresi√≥n simplificada
            const simplifiedTitle = document.querySelectorAll('#ex3 .exercise-part h4')[1];
            if (simplifiedTitle) {
                simplifiedTitle.innerHTML = `Expresi√≥n simplificada (1.5 puntos)`;
            }

            // Actualizar la gu√≠a de simplificaci√≥n
            const simplificationGuide = document.querySelector('#ex3 .exercise-part div[style*="background: #e8f5e8"]');
            if (simplificationGuide) {
                simplificationGuide.innerHTML = generateSimplificationGuideHTML(ex3Data);
            }
        }

        function generateStepGuideHTML(ex3Data) {
            const exampleTable = generateExampleTableHTML(ex3Data);
            const practicalMethod = generatePracticalMethodHTML(ex3Data);
            
            return `
                <h4>üìö ¬øQu√© es un ${ex3Data.title}?</h4>
                <p>Un <strong>${ex3Data.title.toLowerCase()}</strong> es un circuito l√≥gico que ${ex3Data.description.toLowerCase()}.</p>
                <div style="background: #e8f5e8; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 5px solid #28a745;">
                    <h5 style="color: #1b5e20; margin-bottom: 10px;">üéØ Regla del ${ex3Data.title}:</h5>
                    <ul style="color: #1b5e20; margin-left: 20px;">
                        <li><strong>${ex3Data.rule}</strong></li>
                        <li><strong>Descripci√≥n:</strong> ${ex3Data.description}</li>
                    </ul>
                </div>
                <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 5px solid #ffc107;">
                    <h5 style="color: #856404; margin-bottom: 10px;">üîç An√°lisis Paso a Paso:</h5>
                    <div style="color: #856404; font-size: 14px;">
                        ${exampleTable}
                    </div>
                </div>
                <div style="background: #d1ecf1; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 5px solid #17a2b8;">
                    ${practicalMethod}
                </div>
            `;
        }

        function generateExampleTableHTML(ex3Data) {
            const rows = [
                { case: 1, inputs: "(0,0,0)", count: "0 unos", result: 0 },
                { case: 2, inputs: "(0,0,1)", count: "1 uno", result: 0 },
                { case: 3, inputs: "(0,1,0)", count: "1 uno", result: 0 },
                { case: 4, inputs: "(0,1,1)", count: "2 unos", result: 0 },
                { case: 5, inputs: "(1,0,0)", count: "1 uno", result: 0 },
                { case: 6, inputs: "(1,0,1)", count: "2 unos", result: 0 },
                { case: 7, inputs: "(1,1,0)", count: "2 unos", result: 0 },
                { case: 8, inputs: "(1,1,1)", count: "3 unos", result: 1 }
            ];

            // Calcular resultados seg√∫n el tipo de circuito
            rows.forEach(row => {
                const [A, B, C] = row.inputs.slice(1, -1).split(',').map(x => parseInt(x));
                const suma = A + B + C;
                
                switch(ex3Data.title) {
                    case "Circuito de Mayor√≠a":
                        row.result = suma >= 2 ? 1 : 0;
                        row.rule = suma >= 2 ? `‚úÖ S√≠ (${suma} ‚â• 2)` : `‚ùå No (${suma} < 2)`;
                        break;
                    case "Circuito de Unanimidad":
                        row.result = (A === 1 && B === 1 && C === 1) ? 1 : 0;
                        row.rule = row.result === 1 ? "‚úÖ S√≠ (todas=1)" : "‚ùå No (no todas=1)";
                        break;
                    case "Circuito de Minor√≠a":
                        row.result = suma <= 1 ? 1 : 0;
                        row.rule = suma <= 1 ? `‚úÖ S√≠ (${suma} ‚â§ 1)` : `‚ùå No (${suma} > 1)`;
                        break;
                    case "Circuito Par":
                        row.result = suma % 2 === 0 ? 1 : 0;
                        row.rule = suma % 2 === 0 ? `‚úÖ S√≠ (${suma} par)` : `‚ùå No (${suma} impar)`;
                        break;
                    case "Circuito OR Exclusivo Triple":
                        row.result = (suma === 1 || suma === 3) ? 1 : 0;
                        row.rule = (suma === 1 || suma === 3) ? `‚úÖ S√≠ (${suma}‚àà{1,3})` : `‚ùå No (${suma}‚àâ{1,3})`;
                        break;
                }
            });

            let tableHTML = `
                <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                    <tr style="background: #f8f9fa;">
                        <th style="padding: 8px; border: 1px solid #ddd;">Caso</th>
                        <th style="padding: 8px; border: 1px solid #ddd;">Entradas (A,B,C)</th>
                        <th style="padding: 8px; border: 1px solid #ddd;">Cuenta de 1s</th>
                        <th style="padding: 8px; border: 1px solid #ddd;">¬ø${ex3Data.title.replace('Circuito de ', '')}?</th>
                        <th style="padding: 8px; border: 1px solid #ddd;">Salida Y</th>
                    </tr>
            `;

            rows.forEach(row => {
                const bgColor = row.result === 1 ? '#e8f5e8' : '#ffebee';
                tableHTML += `
                    <tr>
                        <td style="padding: 8px; border: 1px solid #ddd;">${row.case}</td>
                        <td style="padding: 8px; border: 1px solid #ddd;">${row.inputs}</td>
                        <td style="padding: 8px; border: 1px solid #ddd;">${row.count}</td>
                        <td style="padding: 8px; border: 1px solid #ddd;">${row.rule}</td>
                        <td style="padding: 8px; border: 1px solid #ddd; background: ${bgColor};"><strong>${row.result}</strong></td>
                    </tr>
                `;
            });

            tableHTML += '</table>';
            return tableHTML;
        }

        function generatePracticalMethodHTML(ex3Data) {
            let methodHTML = `<h5 style="color: #0c5460; margin-bottom: 10px;">üí° M√©todo Pr√°ctico:</h5>`;
            
            switch(ex3Data.title) {
                case "Circuito de Mayor√≠a":
                    methodHTML += `
                        <ol style="color: #0c5460; margin-left: 20px;">
                            <li><strong>Cuenta los 1s</strong> en cada fila (A + B + C)</li>
                            <li><strong>Si hay 2 o m√°s 1s</strong> ‚Üí La salida es <strong>1</strong></li>
                            <li><strong>Si hay menos de 2 unos</strong> ‚Üí La salida es <strong>0</strong></li>
                        </ol>
                        <div style="margin-top: 15px; padding: 10px; background: #b8daff; border-radius: 5px;">
                            <strong>üßÆ F√≥rmula r√°pida:</strong><br/>
                            <code>Salida = 1 si (A + B + C ‚â• 2), sino 0</code>
                        </div>
                    `;
                    break;
                case "Circuito de Unanimidad":
                    methodHTML += `
                        <ol style="color: #0c5460; margin-left: 20px;">
                            <li><strong>Verifica que TODAS las entradas sean 1</strong></li>
                            <li><strong>Si A=1 AND B=1 AND C=1</strong> ‚Üí La salida es <strong>1</strong></li>
                            <li><strong>Si cualquier entrada es 0</strong> ‚Üí La salida es <strong>0</strong></li>
                        </ol>
                        <div style="margin-top: 15px; padding: 10px; background: #b8daff; border-radius: 5px;">
                            <strong>üßÆ F√≥rmula r√°pida:</strong><br/>
                            <code>Salida = A AND B AND C</code>
                        </div>
                    `;
                    break;
                case "Circuito de Minor√≠a":
                    methodHTML += `
                        <ol style="color: #0c5460; margin-left: 20px;">
                            <li><strong>Cuenta los 1s</strong> en cada fila (A + B + C)</li>
                            <li><strong>Si hay 1 o menos 1s</strong> ‚Üí La salida es <strong>1</strong></li>
                            <li><strong>Si hay 2 o m√°s unos</strong> ‚Üí La salida es <strong>0</strong></li>
                        </ol>
                        <div style="margin-top: 15px; padding: 10px; background: #b8daff; border-radius: 5px;">
                            <strong>üßÆ F√≥rmula r√°pida:</strong><br/>
                            <code>Salida = 1 si (A + B + C ‚â§ 1), sino 0</code>
                        </div>
                    `;
                    break;
                case "Circuito Par":
                    methodHTML += `
                        <ol style="color: #0c5460; margin-left: 20px;">
                            <li><strong>Cuenta los 1s</strong> en cada fila (A + B + C)</li>
                            <li><strong>Si la suma es par (0,2)</strong> ‚Üí La salida es <strong>1</strong></li>
                            <li><strong>Si la suma es impar (1,3)</strong> ‚Üí La salida es <strong>0</strong></li>
                        </ol>
                        <div style="margin-top: 15px; padding: 10px; background: #b8daff; border-radius: 5px;">
                            <strong>üßÆ F√≥rmula r√°pida:</strong><br/>
                            <code>Salida = 1 si (A + B + C) es par, sino 0</code>
                        </div>
                    `;
                    break;
                case "Circuito OR Exclusivo Triple":
                    methodHTML += `
                        <ol style="color: #0c5460; margin-left: 20px;">
                            <li><strong>Cuenta los 1s</strong> en cada fila (A + B + C)</li>
                            <li><strong>Si hay exactamente 1 o 3 unos</strong> ‚Üí La salida es <strong>1</strong></li>
                            <li><strong>Si hay 0 o 2 unos</strong> ‚Üí La salida es <strong>0</strong></li>
                        </ol>
                        <div style="margin-top: 15px; padding: 10px; background: #b8daff; border-radius: 5px;">
                            <strong>üßÆ F√≥rmula r√°pida:</strong><br/>
                            <code>Salida = 1 si suma ‚àà {1,3}, sino 0</code>
                        </div>
                    `;
                    break;
            }
            
            return methodHTML;
        }

        function generateHintText(ex3Data) {
            switch(ex3Data.title) {
                case "Circuito de Mayor√≠a":
                    return 'Observe la columna "Suma". Cuando la suma es ‚â• 2, la salida debe ser 1. Cuando la suma es < 2, la salida debe ser 0.';
                case "Circuito de Unanimidad":
                    return 'Solo la √∫ltima fila (1,1,1) debe tener salida = 1. Todas las dem√°s filas deben tener salida = 0.';
                case "Circuito de Minor√≠a":
                    return 'Observe la columna "Suma". Cuando la suma es ‚â§ 1, la salida debe ser 1. Cuando la suma es > 1, la salida debe ser 0.';
                case "Circuito Par":
                    return 'Observe la columna "Suma". Cuando la suma es par (0,2), la salida debe ser 1. Cuando la suma es impar (1,3), la salida debe ser 0.';
                case "Circuito OR Exclusivo Triple":
                    return 'Observe la columna "Suma". Cuando la suma es 1 o 3, la salida debe ser 1. Cuando la suma es 0 o 2, la salida debe ser 0.';
                default:
                    return 'Complete la tabla seg√∫n la regla especificada.';
            }
        }

        function generateSimplificationGuideHTML(ex3Data) {
            // Generar ejemplos espec√≠ficos seg√∫n el tipo de circuito
            let specificExample = "";
            let placeholderText = "";
            let formatExamples = "";
            
            switch(ex3Data.title) {
                case "Circuito de Mayor√≠a":
                    specificExample = "AB + AC + BC";
                    placeholderText = "Ejemplo: AB+AC+BC o AB + AC + BC";
                    formatExamples = `
                        <li><code>AB + AC + BC</code> ‚úÖ</li>
                        <li><code>AB+AC+BC</code> ‚úÖ</li>
                        <li><code>BC + AB + AC</code> ‚úÖ</li>
                        <li><code>AC + BC + AB</code> ‚úÖ</li>
                    `;
                    break;
                case "Circuito de Unanimidad":
                    specificExample = "ABC";
                    placeholderText = "Ejemplo: ABC o A*B*C o A¬∑B¬∑C";
                    formatExamples = `
                        <li><code>ABC</code> ‚úÖ</li>
                        <li><code>A*B*C</code> ‚úÖ</li>
                        <li><code>A¬∑B¬∑C</code> ‚úÖ</li>
                        <li><code>A*B*C</code> ‚úÖ</li>
                    `;
                    break;
                case "Circuito de Minor√≠a":
                    specificExample = "A'B'C'+A'B'C+A'BC'+AB'C'";
                    placeholderText = "Ejemplo: A'B'C'+A'B'C+A'BC'+AB'C' o con espacios";
                    formatExamples = `
                        <li><code>A'B'C'+A'B'C+A'BC'+AB'C'</code> ‚úÖ</li>
                        <li><code>A'B'C' + A'B'C + A'BC' + AB'C'</code> ‚úÖ</li>
                        <li><code>A'B'+A'C'+B'C'</code> ‚úÖ (simplificada)</li>
                    `;
                    break;
                case "Circuito Par":
                    specificExample = "A'B'C'+A'BC+AB'C+ABC'";
                    placeholderText = "Ejemplo: A'B'C'+A'BC+AB'C+ABC' o con espacios";
                    formatExamples = `
                        <li><code>A'B'C'+A'BC+AB'C+ABC'</code> ‚úÖ</li>
                        <li><code>A'B'C' + A'BC + AB'C + ABC'</code> ‚úÖ</li>
                    `;
                    break;
                case "Circuito OR Exclusivo Triple":
                    specificExample = "A'B'C+A'BC'+AB'C'+ABC";
                    placeholderText = "Ejemplo: A'B'C+A'BC'+AB'C'+ABC o con espacios";
                    formatExamples = `
                        <li><code>A'B'C+A'BC'+AB'C'+ABC</code> ‚úÖ</li>
                        <li><code>A'B'C + A'BC' + AB'C' + ABC</code> ‚úÖ</li>
                    `;
                    break;
            }
            
            // Actualizar el placeholder del input
            setTimeout(() => {
                const inputElement = document.getElementById('ex3_simplified');
                if (inputElement) {
                    inputElement.placeholder = placeholderText;
                }
            }, 100);
            
            return `
                <h5 style="color: #1b5e20; margin-bottom: 15px;">üìö Expresi√≥n Simplificada para ${ex3Data.title}:</h5>
                <div style="color: #1b5e20; font-size: 14px;">
                    
                    <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin: 15px 0;">
                        <h6 style="color: #856404; margin-bottom: 10px;"><strong>üí° Respuesta Esperada para ${ex3Data.title}:</strong></h6>
                        <div style="background: #f8f9fa; padding: 10px; border-radius: 5px; font-family: monospace; font-size: 16px; margin: 10px 0;">
                            <strong>${specificExample}</strong>
                        </div>
                    </div>
                    
                    <h6 style="color: #2e7d32; margin: 15px 0 10px 0;"><strong>üìã Reglas de Formato:</strong></h6>
                    <ul style="margin-left: 20px;">
                        <li>Use <strong>'</strong> para NOT (A', B', C')</li>
                        <li>Use <strong>+</strong> para OR</li>
                        <li>Use <strong>*</strong> o nada para AND (AB = A*B)</li>
                        <li><strong>Espacios son OPCIONALES</strong> (ABC o A B C)</li>
                        <li>Cualquier orden de t√©rminos es v√°lido</li>
                    </ul>
                    
                    <h6 style="color: #2e7d32; margin: 15px 0 10px 0;"><strong>‚úÖ Ejemplos de Formatos Correctos:</strong></h6>
                    <ul style="margin-left: 20px;">
                        ${formatExamples}
                    </ul>
                    
                    <div style="background: #e3f2fd; padding: 10px; border-radius: 5px; margin: 15px 0;">
                        <strong style="color: #1976d2;">‚ö†Ô∏è Importante:</strong><br/>
                        <span style="color: #1976d2;">La expresi√≥n debe coincidir exactamente con la tabla de verdad que completaste arriba.</span>
                    </div>
                    
                    <div style="background: #e8f5e8; padding: 10px; border-radius: 5px; margin: 15px 0;">
                        <strong style="color: #1b5e20;">üí≠ Pista para escribir:</strong><br/>
                        <span style="color: #1b5e20;">Puedes escribir <code>${specificExample}</code> exactamente como se muestra, con o sin espacios.</span>
                    </div>
                </div>
            `;
        }

        function loadExercise4(version) {
            const ex4Data = exerciseVariants.ex4[version];
            
            // Actualizar la expresi√≥n a simplificar
            const expressionDiv = document.querySelector('#ex4 .exercise-part div');
            if (expressionDiv) {
                expressionDiv.innerHTML = `Y = ${ex4Data.expression}`;
            }
        }

        function updateCorrectAnswers(version) {
            console.log(`üîÑ Actualizando respuestas correctas para versi√≥n ${version}`);
            
            // Ejercicio 1
            correctAnswers['1a_simplified'] = exerciseVariants.ex1a[version].answer;
            correctAnswers['1b_simplified'] = exerciseVariants.ex1b[version].answer;

            // Ejercicio 3
            correctAnswers['3_simplified'] = exerciseVariants.ex3[version].simplified;
            correctTruthTables.ex3 = exerciseVariants.ex3[version].truthTable;

            // Ejercicio 4
            correctAnswers['4_simplified'] = exerciseVariants.ex4[version].simplified;
            correctTruthTables.ex4 = exerciseVariants.ex4[version].truthTable;

            // Circuitos
            correctCircuitAnswers['1a'] = exerciseVariants.ex1a[version].circuit_correct;
            correctCircuitAnswers['1b'] = exerciseVariants.ex1b[version].circuit_correct;

            console.log('‚úÖ Respuestas correctas actualizadas:');
            console.log('Ejercicio 3 simplificado:', correctAnswers['3_simplified']);
            console.log('Tabla de verdad Ejercicio 3:', correctTruthTables.ex3);
            console.log('Versi√≥n cargada:', version);
            console.log('Tipo de circuito:', exerciseVariants.ex3[version].title);
        }

        // ===== FUNCIONES PRINCIPALES =====
        function updateStudentInfo() {
            const selectedId = document.getElementById('studentSelect').value;
            const nameField = document.getElementById('studentName');
            const careerField = document.getElementById('studentCareer');
            const startBtn = document.getElementById('startBtn');

            if (selectedId && studentsDatabase[selectedId]) {
                const student = studentsDatabase[selectedId];
                nameField.value = student.name;
                careerField.value = student.career;
                startBtn.disabled = false;
            } else {
                nameField.value = '';
                careerField.value = '';
                startBtn.disabled = true;
            }
        }

        function switchTab(tabName) {
            // Ocultar todos los contenidos
            const allTabContents = document.querySelectorAll('.tab-content');
            allTabContents.forEach(tab => tab.classList.remove('active'));
            
            // Remover clase active de todos los tabs
            const allTabs = document.querySelectorAll('.tab');
            allTabs.forEach(tab => tab.classList.remove('active'));

            // Mostrar el contenido seleccionado
            const targetTab = document.getElementById(tabName);
            if (targetTab) targetTab.classList.add('active');
            
            // Activar el tab correspondiente
            const tabButtons = document.querySelectorAll('.tab');
            tabButtons.forEach(button => {
                const onclickAttr = button.getAttribute('onclick');
                if (onclickAttr && onclickAttr.includes(`'${tabName}'`)) {
                    button.classList.add('active');
                }
            });
        }

        function startExam() {
            const selectedId = document.getElementById('studentSelect').value;
            
            if (!selectedId || !studentsDatabase[selectedId]) {
                alert('‚ö†Ô∏è Por favor selecciona una matr√≠cula v√°lida');
                return;
            }

            const studentData = studentsDatabase[selectedId];
            currentStudent = {
                id: selectedId,
                name: studentData.name,
                career: studentData.career,
                group: "5A"
            };

            // Generar versi√≥n √∫nica para este estudiante
            const studentVersion = generateStudentVersion(selectedId);
            currentStudent.version = studentVersion;
            
            // Cargar ejercicios espec√≠ficos para esta versi√≥n
            loadStudentExercises(studentVersion);

            console.log(`Estudiante: ${currentStudent.name}`);
            console.log(`Matr√≠cula: ${selectedId}`);
            console.log(`Versi√≥n asignada: ${studentVersion}`);

            switchTab('ex1');
        }

        function selectCircuitOption(exercise, option) {
            circuitAnswers[exercise] = option;
            
            // Actualizar feedback visual NEUTRAL (sin mostrar respuestas correctas)
            const allRadios = document.querySelectorAll(`input[name="circuit${exercise}"]`);
            
            allRadios.forEach(radio => {
                const label = radio.nextElementSibling;
                if (radio.value === option) {
                    // Resaltar la opci√≥n seleccionada en azul (neutral)
                    label.style.color = '#1e3c72';
                    label.style.fontWeight = 'bold';
                    label.style.backgroundColor = '#e3f2fd';
                    label.style.padding = '5px';
                    label.style.borderRadius = '5px';
                } else {
                    // Restaurar estilo normal para opciones no seleccionadas
                    label.style.color = '#495057';
                    label.style.fontWeight = 'normal';
                    label.style.backgroundColor = 'transparent';
                    label.style.padding = '0';
                    label.style.borderRadius = '0';
                }
            });
        }

        function checkAnswer(exercise) {
            console.log('Validando ejercicio:', exercise);
            
            if (exercise === '3table') {
                checkTruthTable3();
            } else if (exercise === '4karnaugh') {
                checkKarnaughMap();
            } else if (exercise === '4table') {
                checkTruthTable4();
            } else if (exercise === '3simplified') {
                checkSimplifiedExpression('3simplified');
            } else if (exercise === '4simplified') {
                checkSimplifiedExpression('4simplified');
            } else {
                checkRegularAnswer(exercise);
            }
        }

        function checkSimplifiedExpression(exercise) {
            console.log('üîç Verificando expresi√≥n simplificada:', exercise);
            
            const inputElement = document.getElementById(`ex${exercise.replace('simplified', '_simplified')}`);
            
            if (!inputElement) {
                console.error('No se encontr√≥ el input para:', exercise);
                return;
            }
            
            const userAnswer = inputElement.value.trim();
            const feedbackElement = document.getElementById(`feedback${exercise}`);
            const attemptsElement = document.getElementById(`attempts${exercise}`);
            
            console.log('Respuesta del usuario:', userAnswer);
            console.log('Versi√≥n actual del estudiante:', currentStudent?.version);
            
            if (!userAnswer) {
                feedbackElement.innerHTML = '<div class="feedback neutral">‚ö†Ô∏è Por favor ingrese una respuesta antes de validar.</div>';
                return;
            }
            
            // Verificar expresi√≥n simplificada
            let isCorrect = false;
            const correctOptions = correctAnswers[exercise.replace('simplified', '_simplified')];
            
            console.log('Opciones correctas configuradas:', correctOptions);
            
            if (correctOptions) {
                const normalizedUserAnswer = normalizeAnswer(userAnswer);
                console.log('Respuesta normalizada del usuario:', normalizedUserAnswer);
                
                isCorrect = correctOptions.some(answer => {
                    const normalizedCorrect = normalizeAnswer(answer);
                    console.log(`Comparando: "${normalizedUserAnswer}" con "${normalizedCorrect}"`);
                    return normalizedUserAnswer === normalizedCorrect;
                });
                
                console.log('¬øEs correcta?', isCorrect);
            } else {
                console.error('No se encontraron opciones correctas para:', exercise);
            }
            
            if (isCorrect) {
                feedbackElement.innerHTML = '<div class="feedback correct">‚úÖ ¬°Correcto! Excelente trabajo.</div>';
                inputElement.disabled = true;
                const validateBtn = inputElement.parentElement.querySelector('.btn');
                if (validateBtn) validateBtn.disabled = true;
            } else {
                if (attempts[exercise]) {
                    attempts[exercise]--;
                    if (attemptsElement) attemptsElement.textContent = attempts[exercise];
                }
                
                if (!attempts[exercise] || attempts[exercise] <= 0) {
                    feedbackElement.innerHTML = `<div class="feedback incorrect">‚ùå Sin intentos restantes.<br><strong>Respuestas correctas:</strong> ${correctOptions ? correctOptions.join(', ') : 'No configuradas'}</div>`;
                    inputElement.disabled = true;
                    const validateBtn = inputElement.parentElement.querySelector('.btn');
                    if (validateBtn) validateBtn.disabled = true;
                } else {
                    feedbackElement.innerHTML = `<div class="feedback incorrect">‚ùå Incorrecto. Intente nuevamente.<br><strong>Pista:</strong> Verifique el formato y el tipo de circuito.</div>`;
                }
            }
        }

        function normalizeAnswer(answer) {
            return answer.toLowerCase()
                         .replace(/\s+/g, '')
                         .replace(/'/g, '')
                         .replace(/ÃÖ/g, '')
                         .replace(/~/g, '')
                         .replace(/\*/g, '')
                         .replace(/¬∑/g, '')
                         .replace(/\+/g, '+')
                         .trim();
        }

        function checkTruthTable4() {
            console.log('Validando tabla de verdad del ejercicio 4');
            const correct = correctTruthTables.ex4;
            let allCorrect = true;
            let answeredCount = 0;
            let correctCount = 0;
            
            for (let i = 0; i < 16; i++) {
                const select = document.getElementById(`tt4_${i}`);
                if (select) {
                    const userValue = select.value;
                    if (userValue === '') {
                        select.style.borderColor = '#ffc107';
                        allCorrect = false;
                    } else {
                        answeredCount++;
                        if (parseInt(userValue) === correct[i]) {
                            correctCount++;
                        } else {
                            allCorrect = false;
                        }
                        select.style.borderColor = '#e9ecef';
                    }
                }
            }
            
            const feedback = document.getElementById('feedback4table');
            if (answeredCount === 0) {
                feedback.innerHTML = '<div class="feedback neutral">‚ö†Ô∏è Por favor complete al menos una respuesta antes de validar.</div>';
            } else if (answeredCount < 16) {
                feedback.innerHTML = `<div class="feedback neutral">‚ö†Ô∏è Complete todas las filas. Faltan ${16 - answeredCount} respuestas.</div>`;
            } else if (allCorrect) {
                feedback.innerHTML = '<div class="feedback correct">‚úÖ ¬°Excelente! Tabla de verdad completamente correcta!</div>';
                // Deshabilitar selects
                for (let i = 0; i < 16; i++) {
                    const select = document.getElementById(`tt4_${i}`);
                    if (select) select.disabled = true;
                }
                // Encontrar y deshabilitar el bot√≥n espec√≠fico
                const buttons = document.querySelectorAll('#ex4 .btn');
                buttons.forEach(btn => {
                    if (btn.getAttribute('onclick') === 'checkAnswer(\'4table\')') {
                        btn.disabled = true;
                    }
                });
            } else {
                const percentage = Math.round((correctCount / 16) * 100);
                feedback.innerHTML = `<div class="feedback neutral">üìä Tabla completada. Precisi√≥n: ${correctCount}/16 (${percentage}%)</div>`;
            }
        }

        function checkRegularAnswer(exercise) {
            const inputElement = document.getElementById(`ex${exercise}_simplified`) || 
                                document.getElementById(`ex${exercise}_expression`);
            
            if (!inputElement) return;
            
            const userAnswer = inputElement.value.trim();
            const feedbackElement = document.getElementById(`feedback${exercise}`);
            const attemptsElement = document.getElementById(`attempts${exercise}`);
            
            if (!userAnswer) {
                feedbackElement.innerHTML = '<div class="feedback neutral">‚ö†Ô∏è Por favor ingrese una respuesta antes de validar.</div>';
                return;
            }
            
            // Verificar expresi√≥n simplificada
            let isExpressionCorrect = false;
            const correctOptions = correctAnswers[`${exercise}_simplified`] || 
                                 correctAnswers[`${exercise}_expression`];
            
            if (correctOptions) {
                const normalizedUserAnswer = normalizeAnswer(userAnswer);
                isExpressionCorrect = correctOptions.some(answer => 
                    normalizedUserAnswer === normalizeAnswer(answer)
                );
            }

            // Verificar descripci√≥n del circuito (si aplica)
            let isCircuitCorrect = true;
            if (correctCircuitAnswers[exercise]) {
                isCircuitCorrect = circuitAnswers[exercise] === correctCircuitAnswers[exercise];
            }

            const isFullyCorrect = isExpressionCorrect && isCircuitCorrect;
            
            if (isFullyCorrect) {
                feedbackElement.innerHTML = '<div class="feedback correct">‚úÖ ¬°Correcto! Excelente trabajo.</div>';
                // No cambiar color del borde
                inputElement.style.borderColor = '#e9ecef';
                // Deshabilitar input y bot√≥n para evitar m√°s intentos
                inputElement.disabled = true;
                const validateBtn = inputElement.parentElement.querySelector('.btn');
                if (validateBtn) validateBtn.disabled = true;
            } else {
                if (attempts[exercise]) {
                    attempts[exercise]--;
                    if (attemptsElement) attemptsElement.textContent = attempts[exercise];
                }
                
                if (!attempts[exercise] || attempts[exercise] <= 0) {
                    feedbackElement.innerHTML = `<div class="feedback incorrect">‚ùå Sin intentos restantes.</div>`;
                    inputElement.disabled = true;
                    const validateBtn = inputElement.parentElement.querySelector('.btn');
                    if (validateBtn) validateBtn.disabled = true;
                } else {
                    let feedbackMsg = '‚ùå Incorrecto. Intente nuevamente.';
                    if (!isExpressionCorrect && !isCircuitCorrect) {
                        feedbackMsg += ' Revise tanto la expresi√≥n como la descripci√≥n del circuito.';
                    } else if (!isExpressionCorrect) {
                        feedbackMsg += ' Revise la expresi√≥n simplificada.';
                    } else if (!isCircuitCorrect) {
                        feedbackMsg += ' Revise la descripci√≥n del circuito.';
                    }
                    feedbackElement.innerHTML = `<div class="feedback incorrect">${feedbackMsg}</div>`;
                }
                // No cambiar color del borde
                inputElement.style.borderColor = '#e9ecef';
            }
        }

        function checkTruthTable3() {
            console.log('Validando tabla de verdad del ejercicio 3');
            const correct = correctTruthTables.ex3;
            let allCorrect = true;
            let answeredCount = 0;
            let correctCount = 0;
            
            for (let i = 0; i < 8; i++) {
                const select = document.getElementById(`tt3_${i}`);
                if (select) {
                    const userValue = select.value;
                    if (userValue === '') {
                        select.style.borderColor = '#ffc107';
                        allCorrect = false;
                    } else {
                        answeredCount++;
                        if (parseInt(userValue) === correct[i]) {
                            correctCount++;
                        } else {
                            allCorrect = false;
                        }
                        select.style.borderColor = '#e9ecef';
                    }
                }
            }
            
            const feedback = document.getElementById('feedback3table');
            if (answeredCount === 0) {
                feedback.innerHTML = '<div class="feedback neutral">‚ö†Ô∏è Por favor complete al menos una respuesta antes de validar.</div>';
            } else if (answeredCount < 8) {
                feedback.innerHTML = `<div class="feedback neutral">‚ö†Ô∏è Complete todas las filas. Faltan ${8 - answeredCount} respuestas.</div>`;
            } else if (allCorrect) {
                feedback.innerHTML = '<div class="feedback correct">‚úÖ ¬°Excelente! Tabla de verdad completamente correcta!</div>';
                // Deshabilitar selects
                for (let i = 0; i < 8; i++) {
                    const select = document.getElementById(`tt3_${i}`);
                    if (select) select.disabled = true;
                }
                // Encontrar y deshabilitar el bot√≥n espec√≠fico
                const buttons = document.querySelectorAll('#ex3 .btn');
                buttons.forEach(btn => {
                    if (btn.getAttribute('onclick') === 'checkAnswer(\'3table\')') {
                        btn.disabled = true;
                    }
                });
            } else {
                const percentage = Math.round((correctCount / 8) * 100);
                feedback.innerHTML = `<div class="feedback neutral">üìä Tabla completada. Precisi√≥n: ${correctCount}/8 (${percentage}%)</div>`;
            }
        }

        function checkKarnaughMap() {
            console.log('Validando mapa de Karnaugh del ejercicio 4');
            const correctMap = correctTruthTables.ex4;
            const mapOrder = [0,1,3,2,4,5,7,6,12,13,15,14,8,9,11,10];
            let allCorrect = true;
            let answeredCount = 0;
            let correctCount = 0;
            
            mapOrder.forEach((truthIndex, mapIndex) => {
                const select = document.getElementById(`k_${String(mapIndex).padStart(2, '0')}`);
                if (select) {
                    const userValue = select.value;
                    if (userValue === '') {
                        select.style.borderColor = '#ffc107';
                        allCorrect = false;
                    } else {
                        answeredCount++;
                        if (parseInt(userValue) === correctMap[truthIndex]) {
                            correctCount++;
                        } else {
                            allCorrect = false;
                        }
                        select.style.borderColor = '#e9ecef';
                    }
                }
            });
            
            const feedback = document.getElementById('feedback4karnaugh');
            if (answeredCount === 0) {
                feedback.innerHTML = '<div class="feedback neutral">‚ö†Ô∏è Por favor complete al menos una celda antes de validar.</div>';
            } else if (answeredCount < 16) {
                feedback.innerHTML = `<div class="feedback neutral">‚ö†Ô∏è Complete todas las celdas del mapa K. Faltan ${16 - answeredCount} valores.</div>`;
            } else if (allCorrect) {
                feedback.innerHTML = '<div class="feedback correct">‚úÖ ¬°Excelente! Mapa de Karnaugh completamente correcto!</div>';
                // Deshabilitar selects
                mapOrder.forEach((_, mapIndex) => {
                    const select = document.getElementById(`k_${String(mapIndex).padStart(2, '0')}`);
                    if (select) select.disabled = true;
                });
                // Encontrar y deshabilitar el bot√≥n espec√≠fico
                const buttons = document.querySelectorAll('#ex4 .btn');
                buttons.forEach(btn => {
                    if (btn.getAttribute('onclick') === 'checkAnswer(\'4karnaugh\')') {
                        btn.disabled = true;
                    }
                });
            } else {
                const percentage = Math.round((correctCount / 16) * 100);
                feedback.innerHTML = `<div class="feedback neutral">üìä Mapa completado. Precisi√≥n: ${correctCount}/16 (${percentage}%)</div>`;
            }
        }

        function finishExam() {
            if (!currentStudent) {
                alert('Error: No hay estudiante seleccionado');
                return;
            }

            const score = calculateTotalScore();
            displayResults(score);
        }

        function calculateTotalScore() {
            let score = 0;
            
            // Ejercicio 1 (2.5 puntos total)
            // 1a: 0.5 puntos (0.25 circuito + 0.25 simplificaci√≥n)
            if (circuitAnswers['1a'] === correctCircuitAnswers['1a']) score += 0.25;
            if (checkAnswerCorrect('1a_simplified')) score += 0.25;
            
            // 1b: 0.5 puntos (0.25 circuito + 0.25 simplificaci√≥n)  
            if (circuitAnswers['1b'] === correctCircuitAnswers['1b']) score += 0.25;
            if (checkAnswerCorrect('1b_simplified')) score += 0.25;
            
            // Ejercicio 2 (2.5 puntos)
            if (checkAnswerCorrect('2a_expression')) score += 1.0;
            if (checkAnswerCorrect('2b_simplified')) score += 1.5;
            
            // Ejercicio 3 (2.5 puntos)
            // Tabla de verdad: 1 punto
            let correctTT3 = 0;
            for (let i = 0; i < 8; i++) {
                const select = document.getElementById(`tt3_${i}`);
                if (select && select.value !== '' && parseInt(select.value) === correctTruthTables.ex3[i]) {
                    correctTT3++;
                }
            }
            score += (correctTT3 / 8) * 1.0;
            
            // Expresi√≥n simplificada: 1.5 puntos
            if (checkAnswerCorrect('3simplified')) score += 1.5;
            
            // Ejercicio 4 (2.5 puntos)
            // Tabla de verdad: 1 punto
            let correctTT4 = 0;
            for (let i = 0; i < 16; i++) {
                const input = document.getElementById(`tt4_${i}`);
                if (input && input.value !== '' && parseInt(input.value) === correctTruthTables.ex4[i]) {
                    correctTT4++;
                }
            }
            score += (correctTT4 / 16) * 1.0;

            // Mapa de Karnaugh: 1 punto
            let correctK = 0;
            const correctMap = correctTruthTables.ex4;
            const mapOrder = [0,1,3,2,4,5,7,6,12,13,15,14,8,9,11,10];
            mapOrder.forEach((truthIndex, mapIndex) => {
                const input = document.getElementById(`k_${String(mapIndex).padStart(2, '0')}`);
                if (input && input.value !== '' && parseInt(input.value) === correctMap[truthIndex]) {
                    correctK++;
                }
            });
            score += (correctK / 16) * 1.0;
            
            // Expresi√≥n simplificada: 0.5 puntos
            if (checkAnswerCorrect('4simplified')) score += 0.5;
            
            return Math.round(score * 10) / 10;
        }

        function checkAnswerCorrect(answerKey) {
            const inputElement = document.getElementById(`ex${answerKey}`) || 
                                document.getElementById(`ex${answerKey.replace('_', '')}`) ||
                                document.getElementById(answerKey.replace('_', ''));
            
            if (!inputElement) return false;
            
            const userAnswer = inputElement.value.trim();
            const correctOptions = correctAnswers[answerKey];
            
            if (!correctOptions || !userAnswer) return false;
            
            const normalizedUserAnswer = normalizeAnswer(userAnswer);
            return correctOptions.some(answer => 
                normalizedUserAnswer === normalizeAnswer(answer)
            );
        }

        function displayResults(score) {
            const percentage = Math.round((score / 10) * 100);
            let grade = 'F';
            let gradeColor = '#dc3545';
            
            if (percentage >= 90) {
                grade = 'A';
                gradeColor = '#28a745';
            } else if (percentage >= 80) {
                grade = 'B';
                gradeColor = '#20c997';
            } else if (percentage >= 70) {
                grade = 'C';
                gradeColor = '#ffc107';
            } else if (percentage >= 60) {
                grade = 'D';
                gradeColor = '#fd7e14';
            }

            const resultsArea = document.getElementById('resultsArea');
            resultsArea.innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <div style="background: linear-gradient(135deg, ${gradeColor} 0%, ${gradeColor}aa 100%); color: white; padding: 30px; border-radius: 15px; margin: 20px 0;">
                        <h2>üéâ Examen Completado</h2>
                        <div style="font-size: 3em; margin: 20px 0; font-weight: bold;">${score}/10</div>
                        <p style="font-size: 1.5em;">Calificaci√≥n: ${percentage}% (${grade})</p>
                        <p><strong>Estudiante:</strong> ${currentStudent.name}</p>
                        <p><strong>Matr√≠cula:</strong> ${currentStudent.id}</p>
                        <p><strong>Versi√≥n:</strong> ${currentStudent.version}</p>
                        <p><strong>Fecha:</strong> ${new Date().toLocaleDateString()}</p>
                        <p><strong>Hora:</strong> ${new Date().toLocaleTimeString()}</p>
                    </div>

                    <div style="margin-top: 30px;">
                        <button class="btn" onclick="resetExam()">üîÑ Nuevo Examen</button>
                        <button class="btn btn-success" onclick="window.print()">üñ®Ô∏è Imprimir Resultados</button>
                    </div>
                </div>
            `;
        }

        function resetExam() {
            if (confirm('¬øReiniciar el examen? Se perder√°n todas las respuestas.')) {
                // Reset variables globales
                currentStudent = null;
                examAnswers = {};
                circuitAnswers = {};
                attempts = {
                    '1a': 5, '1b': 5,
                    '2a': 5, '2b': 5,
                    '3simplified': 5,
                    '4simplified': 5
                };
                
                // Limpiar informaci√≥n del estudiante
                document.getElementById('studentSelect').value = '';
                document.getElementById('studentName').value = '';
                document.getElementById('studentCareer').value = '';
                document.getElementById('startBtn').disabled = true;
                
                // Limpiar todos los inputs de texto
                const allTextInputs = document.querySelectorAll('input[type="text"]');
                allTextInputs.forEach(input => {
                    if (!input.readOnly) {
                        input.value = '';
                        input.disabled = false;
                        input.style.borderColor = '#e9ecef';
                    }
                });
                
                // Limpiar todos los selects
                const allSelects = document.querySelectorAll('select');
                allSelects.forEach(select => {
                    if (select.id !== 'studentSelect') {
                        select.value = '';
                        select.disabled = false;
                        select.style.borderColor = '#e9ecef';
                    }
                });
                
                // Limpiar radio buttons
                const allRadios = document.querySelectorAll('input[type="radio"]');
                allRadios.forEach(radio => {
                    radio.checked = false;
                    const label = radio.nextElementSibling;
                    if (label) {
                        label.style.color = '#495057';
                        label.style.fontWeight = 'normal';
                        label.style.backgroundColor = 'transparent';
                        label.style.padding = '0';
                        label.style.borderRadius = '0';
                    }
                });
                
                // Rehabilitar todos los botones
                const allButtons = document.querySelectorAll('.btn');
                allButtons.forEach(btn => {
                    if (btn.id !== 'startBtn') {
                        btn.disabled = false;
                    }
                });
                
                // Limpiar todos los feedbacks
                const allFeedback = document.querySelectorAll('[id^="feedback"]');
                allFeedback.forEach(feedback => {
                    feedback.innerHTML = '';
                });
                
                // Restaurar contadores de intentos
                const attemptSpans = document.querySelectorAll('[id^="attempts"]');
                attemptSpans.forEach(span => {
                    span.textContent = '5';
                });
                
                // Limpiar √°rea de resultados
                document.getElementById('resultsArea').innerHTML = '<div class="loading">Los resultados aparecer√°n aqu√≠ al completar el examen</div>';
                
                // Volver a la pesta√±a de estudiante
                switchTab('student');
                
                console.log('üîÑ Examen reiniciado completamente');
            }
        }

        function generateFinalReport() {
            if (!currentStudent) {
                alert('Error: No hay estudiante seleccionado para generar el reporte');
                return;
            }

            const score = calculateTotalScore();
            const percentage = Math.round((score / 10) * 100);
            let grade = 'F';
            
            if (percentage >= 90) grade = 'A';
            else if (percentage >= 80) grade = 'B';
            else if (percentage >= 70) grade = 'C';
            else if (percentage >= 60) grade = 'D';

            // Recopilar todas las respuestas del estudiante
            const studentResponses = collectStudentResponses();
            
            // Generar reporte HTML
            const reportHTML = generateReportHTML(score, percentage, grade, studentResponses);
            
            // Crear archivo PDF usando jsPDF
            generatePDFReport(reportHTML, score, percentage, grade, studentResponses);
        }

        function collectStudentResponses() {
            const responses = {
                ejercicio1: {
                    ex1a: {
                        circuit: circuitAnswers['1a'] || 'No respondido',
                        simplified: document.getElementById('ex1a_simplified')?.value || 'No respondido'
                    },
                    ex1b: {
                        circuit: circuitAnswers['1b'] || 'No respondido', 
                        simplified: document.getElementById('ex1b_simplified')?.value || 'No respondido'
                    }
                },
                ejercicio2: {
                    expression: document.getElementById('ex2a_expression')?.value || 'No respondido',
                    simplified: document.getElementById('ex2b_simplified')?.value || 'No respondido'
                },
                ejercicio3: {
                    truthTable: [],
                    simplified: document.getElementById('ex3_simplified')?.value || 'No respondido'
                },
                ejercicio4: {
                    truthTable: [],
                    karnaughMap: [],
                    simplified: document.getElementById('ex4_simplified')?.value || 'No respondido'
                }
            };

            // Recopilar tabla de verdad ejercicio 3
            for (let i = 0; i < 8; i++) {
                const select = document.getElementById(`tt3_${i}`);
                responses.ejercicio3.truthTable.push(select?.value || '?');
            }

            // Recopilar tabla de verdad ejercicio 4
            for (let i = 0; i < 16; i++) {
                const select = document.getElementById(`tt4_${i}`);
                responses.ejercicio4.truthTable.push(select?.value || '?');
            }

            // Recopilar mapa de Karnaugh
            for (let i = 0; i < 16; i++) {
                const select = document.getElementById(`k_${String(i).padStart(2, '0')}`);
                responses.ejercicio4.karnaughMap.push(select?.value || '?');
            }

            return responses;
        }

        function generateReportHTML(score, percentage, grade, responses) {
            const currentDate = new Date().toLocaleDateString('es-ES');
            const currentTime = new Date().toLocaleTimeString('es-ES');
            
            return `
                <div style="font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto;">
                    <div style="text-align: center; margin-bottom: 30px; border-bottom: 2px solid #1e3c72; padding-bottom: 20px;">
                        <h1 style="color: #1e3c72; margin-bottom: 10px;">REPORTE DE EXAMEN - SISTEMAS DIGITALES</h1>
                        <h2 style="color: #666; margin: 5px 0;">Universidad Tecnol√≥gica del Suroeste de Guanajuato</h2>
                        <p style="margin: 5px 0; color: #666;">Cuatrimestre: 6¬∞ Mayo-Agosto 2025 | Semana: 04 (03-09 Junio)</p>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
                        <div>
                            <h3 style="color: #1e3c72; border-bottom: 1px solid #ccc;">Informaci√≥n del Estudiante</h3>
                            <p><strong>Nombre:</strong> ${currentStudent.name}</p>
                            <p><strong>Matr√≠cula:</strong> ${currentStudent.id}</p>
                            <p><strong>Carrera:</strong> ${currentStudent.career}</p>
                            <p><strong>Grupo:</strong> ${currentStudent.group}</p>
                            <p><strong>Versi√≥n del Examen:</strong> ${currentStudent.version}</p>
                        </div>
                        <div>
                            <h3 style="color: #1e3c72; border-bottom: 1px solid #ccc;">Calificaci√≥n Final</h3>
                            <p style="font-size: 24px; color: ${percentage >= 70 ? '#28a745' : '#dc3545'}; font-weight: bold;">${score}/10 (${percentage}%)</p>
                            <p><strong>Letra:</strong> ${grade}</p>
                            <p><strong>Fecha:</strong> ${currentDate}</p>
                            <p><strong>Hora:</strong> ${currentTime}</p>
                        </div>
                    </div>

                    <div style="margin-bottom: 30px;">
                        <h3 style="color: #1e3c72; border-bottom: 1px solid #ccc;">Resumen de Respuestas</h3>
                        
                        <h4 style="color: #2a5298;">Ejercicio 1: Simplificaci√≥n de Circuitos (2.5 pts)</h4>
                        <div style="margin-left: 20px;">
                            <p><strong>1a) Circuito:</strong> Opci√≥n ${responses.ejercicio1.ex1a.circuit}</p>
                            <p><strong>1a) Simplificaci√≥n:</strong> ${responses.ejercicio1.ex1a.simplified}</p>
                            <p><strong>1b) Circuito:</strong> Opci√≥n ${responses.ejercicio1.ex1b.circuit}</p>
                            <p><strong>1b) Simplificaci√≥n:</strong> ${responses.ejercicio1.ex1b.simplified}</p>
                        </div>

                        <h4 style="color: #2a5298;">Ejercicio 2: An√°lisis de Circuito (2.5 pts)</h4>
                        <div style="margin-left: 20px;">
                            <p><strong>Expresi√≥n del circuito:</strong> ${responses.ejercicio2.expression}</p>
                            <p><strong>Expresi√≥n simplificada:</strong> ${responses.ejercicio2.simplified}</p>
                        </div>

                        <h4 style="color: #2a5298;">Ejercicio 3: Circuito L√≥gico (2.5 pts)</h4>
                        <div style="margin-left: 20px;">
                            <p><strong>Tabla de verdad:</strong> [${responses.ejercicio3.truthTable.join(', ')}]</p>
                            <p><strong>Expresi√≥n simplificada:</strong> ${responses.ejercicio3.simplified}</p>
                        </div>

                        <h4 style="color: #2a5298;">Ejercicio 4: Mapas de Karnaugh (2.5 pts)</h4>
                        <div style="margin-left: 20px;">
                            <p><strong>Tabla de verdad:</strong> [${responses.ejercicio4.truthTable.join(', ')}]</p>
                            <p><strong>Mapa K:</strong> [${responses.ejercicio4.karnaughMap.join(', ')}]</p>
                            <p><strong>Expresi√≥n simplificada:</strong> ${responses.ejercicio4.simplified}</p>
                        </div>
                    </div>

                    <div style="margin-top: 30px; padding-top: 20px; border-top: 2px solid #1e3c72; text-align: center; color: #666;">
                        <p>Reporte generado autom√°ticamente el ${currentDate} a las ${currentTime}</p>
                        <p>Profesor: Fausto No√© Jim√©nez | Sistemas Digitales</p>
                    </div>
                </div>
            `;
        }

        function generatePDFReport(htmlContent, score, percentage, grade, responses) {
            // Crear ventana de impresi√≥n con el reporte
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Reporte de Examen - ${currentStudent.name}</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 20px; }
                        @media print {
                            body { margin: 0; }
                            .no-print { display: none; }
                        }
                        .header { text-align: center; margin-bottom: 30px; }
                        .grid { display: flex; justify-content: space-between; margin-bottom: 20px; }
                        .section { margin-bottom: 20px; }
                        .score { font-size: 24px; font-weight: bold; color: ${percentage >= 70 ? '#28a745' : '#dc3545'}; }
                    </style>
                </head>
                <body>
                    ${htmlContent}
                    <div class="no-print" style="text-align: center; margin-top: 30px;">
                        <button onclick="window.print()" style="background: #1e3c72; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 5px;">Imprimir</button>
                        <button onclick="window.close()" style="background: #6c757d; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 5px;">Cerrar</button>
                    </div>
                </body>
                </html>
            `);
            printWindow.document.close();
        }

        function finishExam() {
            if (!currentStudent) {
                alert('Error: No hay estudiante seleccionado');
                return;
            }

            const score = calculateTotalScore();
            const percentage = Math.round((score / 10) * 100);
            let grade = 'F';
            let gradeColor = '#dc3545';
            
            if (percentage >= 90) {
                grade = 'A';
                gradeColor = '#28a745';
            } else if (percentage >= 80) {
                grade = 'B';
                gradeColor = '#20c997';
            } else if (percentage >= 70) {
                grade = 'C';
                gradeColor = '#ffc107';
            } else if (percentage >= 60) {
                grade = 'D';
                gradeColor = '#fd7e14';
            }

            const resultsArea = document.getElementById('resultsArea');
            resultsArea.innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <div style="background: linear-gradient(135deg, ${gradeColor} 0%, ${gradeColor}aa 100%); color: white; padding: 30px; border-radius: 15px; margin: 20px 0;">
                        <h2>üéâ Examen Completado</h2>
                        <div style="font-size: 3em; margin: 20px 0; font-weight: bold;">${score}/10</div>
                        <p style="font-size: 1.5em;">Calificaci√≥n: ${percentage}% (${grade})</p>
                        <p><strong>Estudiante:</strong> ${currentStudent.name}</p>
                        <p><strong>Matr√≠cula:</strong> ${currentStudent.id}</p>
                        <p><strong>Versi√≥n:</strong> ${currentStudent.version}</p>
                        <p><strong>Fecha:</strong> ${new Date().toLocaleDateString()}</p>
                        <p><strong>Hora:</strong> ${new Date().toLocaleTimeString()}</p>
                    </div>

                    <div style="margin-top: 30px;">
                        <button class="btn btn-success" onclick="generateFinalReport()" style="margin: 5px; padding: 12px 24px;">üìÑ Generar Reporte de Evidencias</button>
                        <button class="btn" onclick="resetExam()" style="margin: 5px; padding: 12px 24px;">üîÑ Nuevo Examen</button>
                    </div>
                    
                    <div style="margin-top: 20px; padding: 15px; background: #e3f2fd; border-radius: 8px;">
                        <h4 style="color: #1976d2; margin-bottom: 10px;">üìä Desglose de Calificaci√≥n:</h4>
                        <div style="text-align: left; max-width: 400px; margin: 0 auto;">
                            ${generateScoreBreakdown()}
                        </div>
                    </div>
                </div>
            `;
        }

        function generateScoreBreakdown() {
            let breakdown = '';
            
            // Ejercicio 1
            let ex1Score = 0;
            if (circuitAnswers['1a'] === correctCircuitAnswers['1a']) ex1Score += 0.25;
            if (checkAnswerCorrect('1a_simplified')) ex1Score += 0.25;
            if (circuitAnswers['1b'] === correctCircuitAnswers['1b']) ex1Score += 0.25;
            if (checkAnswerCorrect('1b_simplified')) ex1Score += 0.25;
            breakdown += `<p>‚Ä¢ Ejercicio 1: ${ex1Score}/2.5 puntos</p>`;
            
            // Ejercicio 2
            let ex2Score = 0;
            if (checkAnswerCorrect('2a_expression')) ex2Score += 1.0;
            if (checkAnswerCorrect('2b_simplified')) ex2Score += 1.5;
            breakdown += `<p>‚Ä¢ Ejercicio 2: ${ex2Score}/2.5 puntos</p>`;
            
            // Ejercicio 3
            let ex3Score = 0;
            let correctTT3 = 0;
            for (let i = 0; i < 8; i++) {
                const select = document.getElementById(`tt3_${i}`);
                if (select && select.value !== '' && parseInt(select.value) === correctTruthTables.ex3[i]) {
                    correctTT3++;
                }
            }
            ex3Score += (correctTT3 / 8) * 1.0;
            if (checkAnswerCorrect('3_simplified')) ex3Score += 1.5;
            breakdown += `<p>‚Ä¢ Ejercicio 3: ${Math.round(ex3Score * 10) / 10}/2.5 puntos</p>`;
            
            // Ejercicio 4
            let ex4Score = 0;
            let correctTT4 = 0;
            for (let i = 0; i < 16; i++) {
                const select = document.getElementById(`tt4_${i}`);
                if (select && select.value !== '' && parseInt(select.value) === correctTruthTables.ex4[i]) {
                    correctTT4++;
                }
            }
            ex4Score += (correctTT4 / 16) * 1.0;

            let correctK = 0;
            const correctMap = correctTruthTables.ex4;
            const mapOrder = [0,1,3,2,4,5,7,6,12,13,15,14,8,9,11,10];
            mapOrder.forEach((truthIndex, mapIndex) => {
                const select = document.getElementById(`k_${String(mapIndex).padStart(2, '0')}`);
                if (select && select.value !== '' && parseInt(select.value) === correctMap[truthIndex]) {
                    correctK++;
                }
            });
            ex4Score += (correctK / 16) * 1.0;
            
            if (checkAnswerCorrect('4_simplified')) ex4Score += 0.5;
            breakdown += `<p>‚Ä¢ Ejercicio 4: ${Math.round(ex4Score * 10) / 10}/2.5 puntos</p>`;
            
            return breakdown;
        }

        // ===== ASIGNAR FUNCIONES AL SCOPE GLOBAL =====
        window.updateStudentInfo = updateStudentInfo;
        window.switchTab = switchTab;
        window.startExam = startExam;
        window.selectCircuitOption = selectCircuitOption;
        window.checkAnswer = checkAnswer;
        window.finishExam = finishExam;
        window.resetExam = resetExam;
        window.generateFinalReport = generateFinalReport;

        // ===== INICIALIZACI√ìN =====
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Sistema de Examen Cargado Correctamente');
            
            // Verificar que todas las funciones est√©n definidas
            const requiredFunctions = [
                'updateStudentInfo', 'switchTab', 'startExam', 'checkAnswer',
                'selectCircuitOption', 'finishExam', 'resetExam'
            ];
            
            const missingFunctions = requiredFunctions.filter(funcName => 
                typeof window[funcName] !== 'function'
            );
            
            if (missingFunctions.length > 0) {
                console.error('‚ùå Funciones faltantes:', missingFunctions);
            } else {
                console.log('‚úÖ Todas las funciones est√°n correctamente definidas');
            }
        });
</script>
</body>
</html> text-anchor="middle" x="175" y="65">AÃÖ</text>
<text fill="#666" font-size="12" text-anchor="middle" x="175" y="305">CÃÖ</text>
<text fill="#666" font-size="12" text-anchor="middle" x="355" y="110">AÃÖB</text>
<text fill="#666" font-size="12"
